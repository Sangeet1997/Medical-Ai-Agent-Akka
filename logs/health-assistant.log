2025-08-15 03:43:40.997 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 03:43:41.908 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 03:43:42.593 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 03:43:42.849 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 03:43:42.893 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 03:43:42.957 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#2272548486693010591], selfDc [default].
2025-08-15 03:43:43.659 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 03:43:43.676 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 03:43:43.677 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:43.682 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 03:43:43.683 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:43:43.683 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 03:43:43.736 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 03:43:43.874 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:43:43.875 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:43:44.401 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 03:43:44.401 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 03:43:44.402 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 03:43:44.402 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 03:43:44.402 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 03:43:44.402 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 03:43:44.402 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 03:43:48.071 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING itself (with roles [general-medicine, dc-default], version [0.0.0]) and forming new cluster
2025-08-15 03:43:48.073 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 03:43:48.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 03:43:48.124 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 03:43:48.132 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:43:48.133 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Oldest]
2025-08-15 03:43:48.135 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.145 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:43:48.145 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:43:48.145 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 03:43:48.146 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.146 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.146 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.146 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.147 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:43:48.147 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.147 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:43:48.311 [ForkJoinPool.commonPool-worker-8] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:43:48.312 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:43:48.312 [ForkJoinPool.commonPool-worker-8] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:43:48.313 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:43:48.314 [ForkJoinPool.commonPool-worker-8] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:43:48.314 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:43:48.325 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#-630617909] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:43:48.325 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#371014151] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:43:48.326 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#-847692919] was unhandled. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:43:49.117 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:44:03.128 [HealthAssistantSystem-akka.actor.default-dispatcher-29] WARN  akka.remote.artery.Association - Outbound control stream to [akka://HealthAssistantSystem@127.0.0.1:2552] failed. Restarting it. akka.remote.artery.OutboundHandshake$HandshakeTimeoutException: Handshake with [akka://HealthAssistantSystem@127.0.0.1:2552] did not complete within 20000 ms
2025-08-15 03:44:36.798 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: pharmacy
2025-08-15 03:44:37.640 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 03:44:38.277 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Starting up, Akka version [2.8.5] ...
2025-08-15 03:44:38.454 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 03:44:38.455 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Started up successfully
2025-08-15 03:44:38.618 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2552#-6376215340395642865], selfDc [default].
2025-08-15 03:44:39.250 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 03:44:39.278 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 03:44:39.279 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:44:39.283 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [pharmacy, dc-default]
2025-08-15 03:44:39.286 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:44:39.286 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 03:44:39.340 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 03:44:39.711 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2552/system/cluster/core/daemon/joinSeedNodeProcess-1#1842403416]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:44:39.712 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2552/system/cluster/core/daemon/joinSeedNodeProcess-1#1842403416]] (version [2.8.5])
2025-08-15 03:44:39.815 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon#1200819051]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:44:39.854 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2552] is JOINING, roles [pharmacy, dc-default], version [0.0.0]
2025-08-15 03:44:39.914 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:44:39.959 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Up]
2025-08-15 03:44:40.023 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2551/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:44:40.058 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 03:44:40.461 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8081
2025-08-15 03:44:40.461 [ForkJoinPool.commonPool-worker-7] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8081
2025-08-15 03:44:40.462 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 03:44:40.462 [ForkJoinPool.commonPool-worker-7] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 03:44:40.462 [ForkJoinPool.commonPool-worker-7] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8081/health - Health check
2025-08-15 03:44:40.462 [ForkJoinPool.commonPool-worker-7] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8081/query - Submit medical query
2025-08-15 03:44:40.463 [ForkJoinPool.commonPool-worker-7] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8081/info - System information
2025-08-15 03:44:53.488 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: radiology
2025-08-15 03:44:54.319 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 03:44:54.969 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Starting up, Akka version [2.8.5] ...
2025-08-15 03:44:55.171 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 03:44:55.171 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Started up successfully
2025-08-15 03:44:55.308 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2553#2225215974069889775], selfDc [default].
2025-08-15 03:44:55.986 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 03:44:56.038 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 03:44:56.038 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2553
2025-08-15 03:44:56.042 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [radiology, dc-default]
2025-08-15 03:44:56.046 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:44:56.047 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 03:44:56.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 03:44:56.481 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-341679212]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:44:56.482 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-341679212]] (version [2.8.5])
2025-08-15 03:44:56.482 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-341679212]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:44:56.483 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-341679212]] (version [2.8.5])
2025-08-15 03:44:56.538 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon#1200819051]] to [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 03:44:56.578 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2553] is JOINING, roles [radiology, dc-default], version [0.0.0]
2025-08-15 03:44:56.608 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:44:56.688 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2551/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:44:57.171 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8082
2025-08-15 03:44:57.172 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 03:44:57.172 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8082
2025-08-15 03:44:57.173 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 03:44:57.173 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/health - Health check
2025-08-15 03:44:57.173 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8082/query - Submit medical query
2025-08-15 03:44:57.173 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/info - System information
2025-08-15 03:44:57.263 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2553] to [Up]
2025-08-15 03:44:57.922 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 03:46:01.275 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-001: I have a sore throat and fever. What could this be?
2025-08-15 03:46:01.285 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Routing query bffdf5a4-45a3-430f-9301-a4a42f3f200b from user test-user-001 to department: general-medicine (Query: 'I have a sore throat and fever. What could this be?')
2025-08-15 03:46:01.287 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Successfully routed query bffdf5a4-45a3-430f-9301-a4a42f3f200b to general-medicine department using 'tell' pattern
2025-08-15 03:46:01.289 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query bffdf5a4-45a3-430f-9301-a4a42f3f200b from user test-user-001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 03:46:01.291 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - Sent query bffdf5a4-45a3-430f-9301-a4a42f3f200b to LLMActor using 'ask' pattern
2025-08-15 03:46:01.291 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Processing query bffdf5a4-45a3-430f-9301-a4a42f3f200b on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:46:01.292 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=623
2025-08-15 03:46:01.293 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=623, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have a sore throat and fever. What could this be?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:46:19.254 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2080
2025-08-15 03:46:19.254 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query bffdf5a4-45a3-430f-9301-a4a42f3f200b, response length: 2080
2025-08-15 03:46:19.255 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query bffdf5a4-45a3-430f-9301-a4a42f3f200b (success: true)
2025-08-15 03:46:19.255 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query bffdf5a4-45a3-430f-9301-a4a42f3f200b: success=true
2025-08-15 03:46:19.258 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query bffdf5a4-45a3-430f-9301-a4a42f3f200b to LoggerActor using 'tell' pattern
2025-08-15 03:46:19.258 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.GeneralMedicineActor - Completed processing query bffdf5a4-45a3-430f-9301-a4a42f3f200b - responded to user
2025-08-15 03:46:19.264 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query bffdf5a4-45a3-430f-9301-a4a42f3f200b from user test-user-001 to general-medicine department (tell pattern)
2025-08-15 03:46:19.265 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:46:19.265 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query ID: bffdf5a4-45a3-430f-9301-a4a42f3f200b
2025-08-15 03:46:19.265 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-001
2025-08-15 03:46:19.265 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:46:19.265 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query: I have a sore throat and fever. What could this be?
2025-08-15 03:46:19.266 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Response: I'm happy to help you explore possible causes of your symptoms, but it's essential to remember that ...
2025-08-15 03:46:19.266 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:46:19.266 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:46:19.256910400
2025-08-15 03:46:19.266 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:46:19.267 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:46:19.309 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-002: What is ibuprofen used for and what are the side effects?
2025-08-15 03:46:19.310 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Routing query 08f8aa54-1851-49d8-ba47-c4464a7df131 from user test-user-002 to department: pharmacy (Query: 'What is ibuprofen used for and what are the side effects?')
2025-08-15 03:46:19.310 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 08f8aa54-1851-49d8-ba47-c4464a7df131 to pharmacy department using 'tell' pattern
2025-08-15 03:46:19.312 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 08f8aa54-1851-49d8-ba47-c4464a7df131 from user test-user-002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 03:46:19.313 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 08f8aa54-1851-49d8-ba47-c4464a7df131 to LLMActor for processing
2025-08-15 03:46:19.313 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Processing query 08f8aa54-1851-49d8-ba47-c4464a7df131 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:46:19.313 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671
2025-08-15 03:46:19.314 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is ibuprofen used for and what are the side effects?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:46:33.388 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 1872
2025-08-15 03:46:33.389 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 08f8aa54-1851-49d8-ba47-c4464a7df131, response length: 1872
2025-08-15 03:46:33.390 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 08f8aa54-1851-49d8-ba47-c4464a7df131 (success: true)
2025-08-15 03:46:33.390 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 08f8aa54-1851-49d8-ba47-c4464a7df131 - will log and forward to original sender
2025-08-15 03:46:33.390 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 08f8aa54-1851-49d8-ba47-c4464a7df131 from user test-user-002 to pharmacy department (tell pattern)
2025-08-15 03:46:33.391 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:46:33.391 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Query ID: 08f8aa54-1851-49d8-ba47-c4464a7df131
2025-08-15 03:46:33.391 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-002
2025-08-15 03:46:33.390 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 08f8aa54-1851-49d8-ba47-c4464a7df131 response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 03:46:33.391 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 03:46:33.392 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Query: What is ibuprofen used for and what are the side effects?
2025-08-15 03:46:33.392 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Response: Ibuprofen is a nonsteroidal anti-inflammatory drug (NSAID) commonly used to relieve pain, reduce inf...
2025-08-15 03:46:33.392 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:46:33.392 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:46:33.390498100
2025-08-15 03:46:33.392 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:46:33.393 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:46:33.394 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 08f8aa54-1851-49d8-ba47-c4464a7df131: success=true
2025-08-15 03:46:33.394 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 08f8aa54-1851-49d8-ba47-c4464a7df131 to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 03:46:33.404 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-003: What should I expect during an MRI scan?
2025-08-15 03:46:33.404 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.RouterActor - Routing query 399cc23d-62bf-43cd-bb6d-9f344c0b818c from user test-user-003 to department: radiology (Query: 'What should I expect during an MRI scan?')
2025-08-15 03:46:33.404 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 399cc23d-62bf-43cd-bb6d-9f344c0b818c to radiology department using 'tell' pattern
2025-08-15 03:46:33.406 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query 399cc23d-62bf-43cd-bb6d-9f344c0b818c from user test-user-003 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 03:46:33.407 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.RadiologyActor - Sent radiology query 399cc23d-62bf-43cd-bb6d-9f344c0b818c to LLMActor using 'ask' pattern
2025-08-15 03:46:33.407 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  com.healthassistant.actors.LLMActor - Processing query 399cc23d-62bf-43cd-bb6d-9f344c0b818c on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:46:33.408 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674
2025-08-15 03:46:33.408 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What should I expect during an MRI scan?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:46:51.769 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2370
2025-08-15 03:46:51.770 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 399cc23d-62bf-43cd-bb6d-9f344c0b818c, response length: 2370
2025-08-15 03:46:51.770 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query 399cc23d-62bf-43cd-bb6d-9f344c0b818c (success: true)
2025-08-15 03:46:51.770 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query 399cc23d-62bf-43cd-bb6d-9f344c0b818c
2025-08-15 03:46:51.770 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 399cc23d-62bf-43cd-bb6d-9f344c0b818c: success=true
2025-08-15 03:46:51.771 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Sent log entry for query 399cc23d-62bf-43cd-bb6d-9f344c0b818c to LoggerActor using 'tell' pattern
2025-08-15 03:46:51.771 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 399cc23d-62bf-43cd-bb6d-9f344c0b818c from user test-user-003 to radiology department (tell pattern)
2025-08-15 03:46:51.771 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query 399cc23d-62bf-43cd-bb6d-9f344c0b818c using multiple communication patterns
2025-08-15 03:46:51.771 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:46:51.772 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query ID: 399cc23d-62bf-43cd-bb6d-9f344c0b818c
2025-08-15 03:46:51.772 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-003
2025-08-15 03:46:51.772 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 03:46:51.772 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query: What should I expect during an MRI scan?
2025-08-15 03:46:51.773 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand what to expect during an MRI (Magnetic Resonance Imaging) scan!
...
2025-08-15 03:46:51.773 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:46:51.773 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:46:51.771169700
2025-08-15 03:46:51.773 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:46:51.774 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:46:51.781 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-004: What are the symptoms of diabetes?
2025-08-15 03:46:51.781 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Routing query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf from user test-user-004 to department: general-medicine (Query: 'What are the symptoms of diabetes?')
2025-08-15 03:46:51.781 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf to general-medicine department using 'tell' pattern
2025-08-15 03:46:51.781 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf from user test-user-004 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 03:46:51.782 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.GeneralMedicineActor - Sent query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf to LLMActor using 'ask' pattern
2025-08-15 03:46:51.782 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Processing query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:46:51.782 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606
2025-08-15 03:46:51.783 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the symptoms of diabetes?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:47:08.016 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2265
2025-08-15 03:47:08.016 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf, response length: 2265
2025-08-15 03:47:08.016 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf (success: true)
2025-08-15 03:47:08.017 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf to LoggerActor using 'tell' pattern
2025-08-15 03:47:08.017 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf: success=true
2025-08-15 03:47:08.017 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf from user test-user-004 to general-medicine department (tell pattern)
2025-08-15 03:47:08.017 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf - responded to user
2025-08-15 03:47:08.017 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:47:08.018 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Query ID: 75b1a1a8-13a4-4d9a-b1af-cf69d121aabf
2025-08-15 03:47:08.018 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-004
2025-08-15 03:47:08.018 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:47:08.018 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Query: What are the symptoms of diabetes?
2025-08-15 03:47:08.018 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand the common symptoms of diabetes. However, please note that only ...
2025-08-15 03:47:08.019 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:47:08.019 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:47:08.017689600
2025-08-15 03:47:08.019 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:47:08.019 [HealthAssistantSystem-akka.actor.default-dispatcher-23] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:48:13.885 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:48:13.886 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:48:13.890 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:48:13.891 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:48:17.640 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up)].
2025-08-15 03:48:17.641 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 03:48:17.646 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 03:48:17.995 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up)].
2025-08-15 03:48:23.429 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2551,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:48:24.083 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2551,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:48:36.985 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Leader can currently not perform its duties, reachability status: [akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2551: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2553 -> akka://HealthAssistantSystem@127.0.0.1:2551: Unreachable [Unreachable] (1)], member status: [akka://HealthAssistantSystem@127.0.0.1:2551 Up seen=false, akka://HealthAssistantSystem@127.0.0.1:2552 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2553 Up seen=true]
2025-08-15 03:48:38.006 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.cluster.sbr.SplitBrainResolver - SBR took decision DownUnreachable and is downing [akka://HealthAssistantSystem@127.0.0.1:2551], [1] unreachable of [3] members, all members in DC [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2552, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)], full reachability status: [akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2551: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2553 -> akka://HealthAssistantSystem@127.0.0.1:2551: Unreachable [Unreachable] (1)]
2025-08-15 03:48:38.007 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR is downing [UniqueAddress(akka://HealthAssistantSystem@127.0.0.1:2551,2272548486693010591)]
2025-08-15 03:48:38.008 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Marking unreachable node [akka://HealthAssistantSystem@127.0.0.1:2551] as [Down]
2025-08-15 03:48:38.009 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members changed during stable-after period. Resetting timer. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T07:48:58.008898500Z.
2025-08-15 03:48:39.024 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Leader can perform its duties again
2025-08-15 03:48:39.029 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Leader is removing unreachable node [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:48:39.040 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Younger observed OldestChanged: [Some(akka://HealthAssistantSystem@127.0.0.1:2551) -> myself]
2025-08-15 03:48:39.042 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Younger -> BecomingOldest]
2025-08-15 03:48:39.411 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - Younger observed OldestChanged: [Some(akka://HealthAssistantSystem@127.0.0.1:2551) -> Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:48:40.063 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [1], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:41.082 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [2], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:42.105 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [3], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:42.110 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2551,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:48:43.113 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [4], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:44.132 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [5], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:45.155 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [6], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:46.164 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [7], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:47.181 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [8], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:48.200 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [9], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:49.224 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [10], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:50.242 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [11], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:50.247 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2551,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:48:51.259 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [12], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:52.283 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [13], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:53.304 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [14], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:54.325 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [15], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:55.331 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [16], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:56.352 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [17], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:57.372 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [18], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:58.389 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [19], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2551)]
2025-08-15 03:48:58.395 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2551,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:48:59.044 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Member removed [akka://HealthAssistantSystem@127.0.0.1:2551], previous oldest [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:48:59.045 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:48:59.046 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [BecomingOldest -> Oldest]
2025-08-15 03:48:59.046 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.055 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:48:59.055 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:48:59.055 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.055 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 03:48:59.055 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.056 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.056 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.056 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.056 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:48:59.056 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:48:59.200 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:48:59.201 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:48:59.202 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:48:59.202 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:48:59.202 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:48:59.202 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:48:59.209 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#-266206693] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:48:59.210 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#600094365] was unhandled. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:48:59.210 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#1612873938] was unhandled. [4] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:48:59.410 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:48:59.411 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - Member removed [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:48:59.799 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2552/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:49:12.044 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 03:49:12.898 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 03:49:13.560 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 03:49:13.743 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 03:49:13.744 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 03:49:13.883 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#7016845827503022805], selfDc [default].
2025-08-15 03:49:14.563 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 03:49:14.599 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 03:49:14.600 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:49:14.604 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 03:49:14.606 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:49:14.607 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 03:49:14.661 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 03:49:15.012 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon/firstSeedNodeProcess-1#-370356774]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:49:15.013 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon/firstSeedNodeProcess-1#-370356774]] (version [2.8.5])
2025-08-15 03:49:15.038 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon/firstSeedNodeProcess-1#-370356774]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:49:15.039 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon/firstSeedNodeProcess-1#-370356774]] (version [2.8.5])
2025-08-15 03:49:15.072 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2552/system/cluster/core/daemon#-242727161]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 03:49:15.113 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING, roles [general-medicine, dc-default], version [0.0.0]
2025-08-15 03:49:15.148 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:49:15.239 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2552/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:49:15.750 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 03:49:15.750 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 03:49:15.751 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 03:49:15.751 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 03:49:15.752 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 03:49:15.752 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 03:49:15.752 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 03:49:16.733 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 03:49:16.734 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.sbr.SplitBrainResolver - This node is not the leader any more and not responsible for taking SBR decisions.
2025-08-15 03:49:16.884 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 03:49:16.901 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 03:49:17.754 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - is no longer leader
2025-08-15 03:49:17.892 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 03:50:23.404 [HealthAssistantSystem-akka.actor.default-dispatcher-34] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:50:23.405 [HealthAssistantSystem-akka.actor.default-dispatcher-34] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:50:23.424 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:50:23.425 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:50:27.221 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)].
2025-08-15 03:50:27.226 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members, waiting for stable-after = 20000 ms before taking downing decision. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T07:50:47.225900800Z.
2025-08-15 03:50:28.062 [HealthAssistantSystem-akka.actor.default-dispatcher-34] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)].
2025-08-15 03:50:32.645 [HealthAssistantSystem-akka.actor.default-dispatcher-33] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2553,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:50:37.433 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2553,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:50:47.612 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can currently not perform its duties, reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (2)], member status: [akka://HealthAssistantSystem@127.0.0.1:2551 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2552 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2553 Up seen=false]
2025-08-15 03:50:47.614 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.cluster.sbr.SplitBrainResolver - SBR took decision DownUnreachable and is downing [akka://HealthAssistantSystem@127.0.0.1:2553], [1] unreachable of [3] members, all members in DC [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2552, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)], full reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (2)]
2025-08-15 03:50:47.615 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR is downing [UniqueAddress(akka://HealthAssistantSystem@127.0.0.1:2553,2225215974069889775)]
2025-08-15 03:50:47.615 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking unreachable node [akka://HealthAssistantSystem@127.0.0.1:2553] as [Down]
2025-08-15 03:50:47.616 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members changed during stable-after period. Resetting timer. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T07:51:07.616385Z.
2025-08-15 03:50:48.616 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can perform its duties again
2025-08-15 03:50:48.619 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is removing unreachable node [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 03:51:08.632 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Member removed [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 03:51:50.477 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-001: I have a sore throat and fever. What could this be?
2025-08-15 03:51:50.640 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Routing query a1fa1a2c-cc90-4390-9667-5f2a932cf40c from user test-user-001 to department: general-medicine (Query: 'I have a sore throat and fever. What could this be?')
2025-08-15 03:51:50.642 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Successfully routed query a1fa1a2c-cc90-4390-9667-5f2a932cf40c to general-medicine department using 'tell' pattern
2025-08-15 03:51:50.643 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query a1fa1a2c-cc90-4390-9667-5f2a932cf40c from user test-user-001 on node akka://HealthAssistantSystem@127.0.0.1:2552 (ask pattern)
2025-08-15 03:51:50.645 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent query a1fa1a2c-cc90-4390-9667-5f2a932cf40c to LLMActor using 'ask' pattern
2025-08-15 03:51:50.645 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Processing query a1fa1a2c-cc90-4390-9667-5f2a932cf40c on node akka://HealthAssistantSystem@127.0.0.1:2552 using LLaMA model (ask pattern)
2025-08-15 03:51:50.646 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=623
2025-08-15 03:51:50.647 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=623, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have a sore throat and fever. What could this be?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:52:05.627 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2050
2025-08-15 03:52:05.627 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query a1fa1a2c-cc90-4390-9667-5f2a932cf40c, response length: 2050
2025-08-15 03:52:05.628 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query a1fa1a2c-cc90-4390-9667-5f2a932cf40c (success: true)
2025-08-15 03:52:05.633 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query a1fa1a2c-cc90-4390-9667-5f2a932cf40c to LoggerActor using 'tell' pattern
2025-08-15 03:52:05.633 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query a1fa1a2c-cc90-4390-9667-5f2a932cf40c - responded to user
2025-08-15 03:52:05.637 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query a1fa1a2c-cc90-4390-9667-5f2a932cf40c from user test-user-001 to general-medicine department (tell pattern)
2025-08-15 03:52:05.638 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:52:05.638 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Query ID: a1fa1a2c-cc90-4390-9667-5f2a932cf40c
2025-08-15 03:52:05.638 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-001
2025-08-15 03:52:05.638 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:52:05.638 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Query: I have a sore throat and fever. What could this be?
2025-08-15 03:52:05.639 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide some general information that may help. If you're experiencing a...
2025-08-15 03:52:05.639 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:52:05.639 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:52:05.632010100
2025-08-15 03:52:05.640 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:52:05.640 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:52:05.676 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query a1fa1a2c-cc90-4390-9667-5f2a932cf40c: success=true
2025-08-15 03:52:05.716 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-002: What is ibuprofen used for and what are the side effects?
2025-08-15 03:52:05.718 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.RouterActor - Routing query ffbfad85-4551-4cc8-aabd-ac26d9a595bc from user test-user-002 to department: pharmacy (Query: 'What is ibuprofen used for and what are the side effects?')
2025-08-15 03:52:05.719 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.RouterActor - Successfully routed query ffbfad85-4551-4cc8-aabd-ac26d9a595bc to pharmacy department using 'tell' pattern
2025-08-15 03:52:05.720 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query ffbfad85-4551-4cc8-aabd-ac26d9a595bc from user test-user-002 on node akka://HealthAssistantSystem@127.0.0.1:2552 (forward pattern)
2025-08-15 03:52:05.721 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  com.healthassistant.actors.LLMActor - Processing query ffbfad85-4551-4cc8-aabd-ac26d9a595bc on node akka://HealthAssistantSystem@127.0.0.1:2552 using LLaMA model (ask pattern)
2025-08-15 03:52:05.721 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - Sent pharmacy query ffbfad85-4551-4cc8-aabd-ac26d9a595bc to LLMActor for processing
2025-08-15 03:52:05.722 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671
2025-08-15 03:52:05.722 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is ibuprofen used for and what are the side effects?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:52:20.851 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2039
2025-08-15 03:52:20.851 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query ffbfad85-4551-4cc8-aabd-ac26d9a595bc, response length: 2039
2025-08-15 03:52:20.852 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query ffbfad85-4551-4cc8-aabd-ac26d9a595bc (success: true)
2025-08-15 03:52:20.852 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query ffbfad85-4551-4cc8-aabd-ac26d9a595bc response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem@127.0.0.1:2551/temp/singletonProxyhealth-assistant-router-no-dc$b#0]
2025-08-15 03:52:20.852 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query ffbfad85-4551-4cc8-aabd-ac26d9a595bc - will log and forward to original sender
2025-08-15 03:52:20.853 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query ffbfad85-4551-4cc8-aabd-ac26d9a595bc from user test-user-002 to pharmacy department (tell pattern)
2025-08-15 03:52:20.853 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:52:20.853 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Query ID: ffbfad85-4551-4cc8-aabd-ac26d9a595bc
2025-08-15 03:52:20.854 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-002
2025-08-15 03:52:20.854 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 03:52:20.854 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Query: What is ibuprofen used for and what are the side effects?
2025-08-15 03:52:20.854 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Response: Ibuprofen is a nonsteroidal anti-inflammatory drug (NSAID) commonly used to relieve pain, inflammati...
2025-08-15 03:52:20.855 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:52:20.855 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:52:20.852866200
2025-08-15 03:52:20.855 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:52:20.855 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:52:20.856 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query ffbfad85-4551-4cc8-aabd-ac26d9a595bc to original sender Actor[akka://HealthAssistantSystem@127.0.0.1:2551/temp/singletonProxyhealth-assistant-router-no-dc$b#0]
2025-08-15 03:52:20.857 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query ffbfad85-4551-4cc8-aabd-ac26d9a595bc: success=true
2025-08-15 03:52:20.867 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-003: What should I expect during an MRI scan?
2025-08-15 03:52:20.869 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Routing query 68b1bd45-3022-49ce-b141-c6c04b976d91 from user test-user-003 to department: radiology (Query: 'What should I expect during an MRI scan?')
2025-08-15 03:52:20.869 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 68b1bd45-3022-49ce-b141-c6c04b976d91 to radiology department using 'tell' pattern
2025-08-15 03:52:20.871 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query 68b1bd45-3022-49ce-b141-c6c04b976d91 from user test-user-003 on node akka://HealthAssistantSystem@127.0.0.1:2552 (multiple patterns)
2025-08-15 03:52:20.871 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - Sent radiology query 68b1bd45-3022-49ce-b141-c6c04b976d91 to LLMActor using 'ask' pattern
2025-08-15 03:52:20.871 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - Processing query 68b1bd45-3022-49ce-b141-c6c04b976d91 on node akka://HealthAssistantSystem@127.0.0.1:2552 using LLaMA model (ask pattern)
2025-08-15 03:52:20.872 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674
2025-08-15 03:52:20.872 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What should I expect during an MRI scan?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:52:39.335 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2322
2025-08-15 03:52:39.336 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 68b1bd45-3022-49ce-b141-c6c04b976d91, response length: 2322
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query 68b1bd45-3022-49ce-b141-c6c04b976d91 (success: true)
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query 68b1bd45-3022-49ce-b141-c6c04b976d91
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.RadiologyActor - Sent log entry for query 68b1bd45-3022-49ce-b141-c6c04b976d91 to LoggerActor using 'tell' pattern
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 68b1bd45-3022-49ce-b141-c6c04b976d91 from user test-user-003 to radiology department (tell pattern)
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query 68b1bd45-3022-49ce-b141-c6c04b976d91 using multiple communication patterns
2025-08-15 03:52:39.337 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:52:39.338 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Query ID: 68b1bd45-3022-49ce-b141-c6c04b976d91
2025-08-15 03:52:39.338 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-003
2025-08-15 03:52:39.338 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 03:52:39.338 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Query: What should I expect during an MRI scan?
2025-08-15 03:52:39.338 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 68b1bd45-3022-49ce-b141-c6c04b976d91: success=true
2025-08-15 03:52:39.339 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand what to expect during an MRI (Magnetic Resonance Imaging) scan!
...
2025-08-15 03:52:39.339 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:52:39.339 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:52:39.337257100
2025-08-15 03:52:39.339 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:52:39.340 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:52:39.348 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-004: What are the symptoms of diabetes?
2025-08-15 03:52:39.349 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Routing query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 from user test-user-004 to department: general-medicine (Query: 'What are the symptoms of diabetes?')
2025-08-15 03:52:39.350 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 to general-medicine department using 'tell' pattern
2025-08-15 03:52:39.350 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 from user test-user-004 on node akka://HealthAssistantSystem@127.0.0.1:2552 (ask pattern)
2025-08-15 03:52:39.350 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.GeneralMedicineActor - Sent query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 to LLMActor using 'ask' pattern
2025-08-15 03:52:39.350 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - Processing query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 on node akka://HealthAssistantSystem@127.0.0.1:2552 using LLaMA model (ask pattern)
2025-08-15 03:52:39.351 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606
2025-08-15 03:52:39.351 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the symptoms of diabetes?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:52:57.264 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2455
2025-08-15 03:52:57.265 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4, response length: 2455
2025-08-15 03:52:57.265 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 (success: true)
2025-08-15 03:52:57.265 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 to LoggerActor using 'tell' pattern
2025-08-15 03:52:57.266 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 from user test-user-004 to general-medicine department (tell pattern)
2025-08-15 03:52:57.266 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4 - responded to user
2025-08-15 03:52:57.266 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:52:57.266 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query ID: 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4
2025-08-15 03:52:57.267 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-004
2025-08-15 03:52:57.267 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:52:57.267 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query: What are the symptoms of diabetes?
2025-08-15 03:52:57.267 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 3a8b3fb3-590a-4f9b-a550-f8c71bd198c4: success=true
2025-08-15 03:52:57.267 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Response: Thank you for reaching out to me for general health information! As a medical assistant, I'm happy t...
2025-08-15 03:52:57.268 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:52:57.268 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:52:57.265604400
2025-08-15 03:52:57.268 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 03:52:57.268 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:52:59.225 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:52:59.226 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 03:53:03.124 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2552, Up)].
2025-08-15 03:53:03.125 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members, waiting for stable-after = 20000 ms before taking downing decision. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T07:53:23.124701300Z.
2025-08-15 03:53:06.807 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:53:08.815 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-001: I have a sore throat and fever. What could this be?
2025-08-15 03:53:16.908 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:53:22.473 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can currently not perform its duties, reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2552: Unreachable [Unreachable] (2)], member status: [akka://HealthAssistantSystem@127.0.0.1:2551 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2552 Up seen=false]
2025-08-15 03:53:23.493 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.cluster.sbr.SplitBrainResolver - SBR took decision DownUnreachable and is downing [akka://HealthAssistantSystem@127.0.0.1:2552], [1] unreachable of [2] members, all members in DC [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2552, Up)], full reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2552: Unreachable [Unreachable] (2)]
2025-08-15 03:53:23.494 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR is downing [UniqueAddress(akka://HealthAssistantSystem@127.0.0.1:2552,-6376215340395642865)]
2025-08-15 03:53:23.494 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking unreachable node [akka://HealthAssistantSystem@127.0.0.1:2552] as [Down]
2025-08-15 03:53:23.495 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members changed during stable-after period. Resetting timer. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T07:53:43.494878600Z.
2025-08-15 03:53:24.516 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can perform its duties again
2025-08-15 03:53:24.517 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is removing unreachable node [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:53:24.520 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - Younger observed OldestChanged: [Some(akka://HealthAssistantSystem@127.0.0.1:2552) -> myself]
2025-08-15 03:53:24.521 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Younger -> BecomingOldest]
2025-08-15 03:53:25.546 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [1], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:25.630 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:53:26.565 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [2], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:27.583 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [3], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:28.602 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [4], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:29.623 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [5], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:30.646 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - Retry [6], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:31.665 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [7], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:32.684 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [8], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:33.704 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - Retry [9], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:33.708 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:53:34.723 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - Retry [10], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:35.741 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [11], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:36.763 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [12], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:37.786 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [13], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:38.795 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [14], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:38.845 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-002: What is ibuprofen used for and what are the side effects?
2025-08-15 03:53:39.813 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [15], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:40.834 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [16], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:41.854 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [17], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:41.858 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 03:53:42.875 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  a.c.s.ClusterSingletonManager - Retry [18], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:43.895 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Retry [19], sending HandOverToMe to [Some(akka://HealthAssistantSystem@127.0.0.1:2552)]
2025-08-15 03:53:44.522 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Member removed [akka://HealthAssistantSystem@127.0.0.1:2552], previous oldest [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 03:53:44.523 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:53:44.524 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [BecomingOldest -> Oldest]
2025-08-15 03:53:44.525 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.532 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.533 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 03:53:44.533 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.533 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:53:44.623 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:53:44.624 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:53:44.624 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:53:44.625 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:53:44.625 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 03:53:44.625 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 03:53:44.630 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#2112330371] was unhandled. [8] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:53:44.631 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#147942672] was unhandled. [9] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:53:44.634 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#1056359] was unhandled. [10] dead letters encountered, no more dead letters will be logged in next [5.000 min]. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 03:53:44.891 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 03:53:44.894 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.RouterActor - Routing query e87d66ad-376c-48d9-9573-ce875d3c9679 from user test-user-002 to department: pharmacy (Query: 'What is ibuprofen used for and what are the side effects?')
2025-08-15 03:53:44.896 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.RouterActor - Successfully routed query e87d66ad-376c-48d9-9573-ce875d3c9679 to pharmacy department using 'tell' pattern
2025-08-15 03:53:44.898 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query e87d66ad-376c-48d9-9573-ce875d3c9679 from user test-user-002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 03:53:44.902 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.PharmacyActor - Sent pharmacy query e87d66ad-376c-48d9-9573-ce875d3c9679 to LLMActor for processing
2025-08-15 03:53:44.902 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - Processing query e87d66ad-376c-48d9-9573-ce875d3c9679 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:53:44.902 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671
2025-08-15 03:53:44.903 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=671, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is ibuprofen used for and what are the side effects?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:54:00.495 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2034
2025-08-15 03:54:00.496 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query e87d66ad-376c-48d9-9573-ce875d3c9679, response length: 2034
2025-08-15 03:54:00.497 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query e87d66ad-376c-48d9-9573-ce875d3c9679 (success: true)
2025-08-15 03:54:00.500 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query e87d66ad-376c-48d9-9573-ce875d3c9679 response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$f#0]
2025-08-15 03:54:00.502 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query e87d66ad-376c-48d9-9573-ce875d3c9679 - will log and forward to original sender
2025-08-15 03:54:00.502 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query e87d66ad-376c-48d9-9573-ce875d3c9679 from user test-user-002 to pharmacy department (tell pattern)
2025-08-15 03:54:00.503 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:54:00.503 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query ID: e87d66ad-376c-48d9-9573-ce875d3c9679
2025-08-15 03:54:00.503 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-002
2025-08-15 03:54:00.503 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 03:54:00.504 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query: What is ibuprofen used for and what are the side effects?
2025-08-15 03:54:00.504 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Response: Ibuprofen is a nonsteroidal anti-inflammatory drug (NSAID) commonly used to relieve pain, reduce inf...
2025-08-15 03:54:00.504 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:54:00.505 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:54:00.499397400
2025-08-15 03:54:00.505 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:54:00.505 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:54:00.506 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query e87d66ad-376c-48d9-9573-ce875d3c9679: success=true
2025-08-15 03:54:00.506 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query e87d66ad-376c-48d9-9573-ce875d3c9679 to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$f#0]
2025-08-15 03:54:00.515 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-003: What should I expect during an MRI scan?
2025-08-15 03:54:00.516 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Routing query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc from user test-user-003 to department: radiology (Query: 'What should I expect during an MRI scan?')
2025-08-15 03:54:00.516 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc to radiology department using 'tell' pattern
2025-08-15 03:54:00.518 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc from user test-user-003 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 03:54:00.519 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.RadiologyActor - Sent radiology query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc to LLMActor using 'ask' pattern
2025-08-15 03:54:00.519 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Processing query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:54:00.519 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674
2025-08-15 03:54:00.519 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=674, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What should I expect during an MRI scan?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:54:19.077 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2288
2025-08-15 03:54:19.077 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc, response length: 2288
2025-08-15 03:54:19.077 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc (success: true)
2025-08-15 03:54:19.077 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc
2025-08-15 03:54:19.077 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc: success=true
2025-08-15 03:54:19.077 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - Sent log entry for query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc to LoggerActor using 'tell' pattern
2025-08-15 03:54:19.077 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc from user test-user-003 to radiology department (tell pattern)
2025-08-15 03:54:19.079 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc using multiple communication patterns
2025-08-15 03:54:19.079 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:54:19.079 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Query ID: 30a4d4ef-6728-4eeb-905d-54b70fd2ecfc
2025-08-15 03:54:19.079 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-003
2025-08-15 03:54:19.079 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 03:54:19.080 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Query: What should I expect during an MRI scan?
2025-08-15 03:54:19.080 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Response: As a radiology information assistant, I'm happy to guide you through what to expect during an MRI (M...
2025-08-15 03:54:19.080 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:54:19.080 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:54:19.077997700
2025-08-15 03:54:19.080 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:54:19.081 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:54:19.088 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-user-004: What are the symptoms of diabetes?
2025-08-15 03:54:19.089 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Routing query ff7bc951-4ac6-4763-891d-b78168d6bed1 from user test-user-004 to department: general-medicine (Query: 'What are the symptoms of diabetes?')
2025-08-15 03:54:19.089 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.RouterActor - Successfully routed query ff7bc951-4ac6-4763-891d-b78168d6bed1 to general-medicine department using 'tell' pattern
2025-08-15 03:54:19.092 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query ff7bc951-4ac6-4763-891d-b78168d6bed1 from user test-user-004 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 03:54:19.092 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.GeneralMedicineActor - Sent query ff7bc951-4ac6-4763-891d-b78168d6bed1 to LLMActor using 'ask' pattern
2025-08-15 03:54:19.092 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - Processing query ff7bc951-4ac6-4763-891d-b78168d6bed1 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:54:19.093 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606
2025-08-15 03:54:19.093 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the symptoms of diabetes?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:54:34.536 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2231
2025-08-15 03:54:34.537 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query ff7bc951-4ac6-4763-891d-b78168d6bed1, response length: 2231
2025-08-15 03:54:34.537 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query ff7bc951-4ac6-4763-891d-b78168d6bed1 (success: true)
2025-08-15 03:54:34.538 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query ff7bc951-4ac6-4763-891d-b78168d6bed1: success=true
2025-08-15 03:54:34.538 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query ff7bc951-4ac6-4763-891d-b78168d6bed1 to LoggerActor using 'tell' pattern
2025-08-15 03:54:34.538 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query ff7bc951-4ac6-4763-891d-b78168d6bed1 from user test-user-004 to general-medicine department (tell pattern)
2025-08-15 03:54:34.538 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.GeneralMedicineActor - Completed processing query ff7bc951-4ac6-4763-891d-b78168d6bed1 - responded to user
2025-08-15 03:54:34.538 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:54:34.539 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query ID: ff7bc951-4ac6-4763-891d-b78168d6bed1
2025-08-15 03:54:34.539 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - User ID: test-user-004
2025-08-15 03:54:34.539 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:54:34.539 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Query: What are the symptoms of diabetes?
2025-08-15 03:54:34.540 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Response: I'm happy to help you understand more about diabetes! However, please keep in mind that only a quali...
2025-08-15 03:54:34.540 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:54:34.540 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:54:34.538498700
2025-08-15 03:54:34.540 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:54:34.541 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:55:36.884 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 03:55:36.885 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Routing query 3caf391b-4570-42b5-87f7-494ebf99fdb9 from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 03:55:36.885 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 3caf391b-4570-42b5-87f7-494ebf99fdb9 to general-medicine department using 'tell' pattern
2025-08-15 03:55:36.885 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 3caf391b-4570-42b5-87f7-494ebf99fdb9 from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 03:55:36.885 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent query 3caf391b-4570-42b5-87f7-494ebf99fdb9 to LLMActor using 'ask' pattern
2025-08-15 03:55:36.886 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - Processing query 3caf391b-4570-42b5-87f7-494ebf99fdb9 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 03:55:36.886 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 03:55:36.887 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 03:55:41.746 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 873
2025-08-15 03:55:41.747 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 3caf391b-4570-42b5-87f7-494ebf99fdb9, response length: 873
2025-08-15 03:55:41.747 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 3caf391b-4570-42b5-87f7-494ebf99fdb9 (success: true)
2025-08-15 03:55:41.747 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 3caf391b-4570-42b5-87f7-494ebf99fdb9 to LoggerActor using 'tell' pattern
2025-08-15 03:55:41.747 [ForkJoinPool.commonPool-worker-14] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 3caf391b-4570-42b5-87f7-494ebf99fdb9: success=true
2025-08-15 03:55:41.747 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 3caf391b-4570-42b5-87f7-494ebf99fdb9 from user monitor-test to general-medicine department (tell pattern)
2025-08-15 03:55:41.748 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 3caf391b-4570-42b5-87f7-494ebf99fdb9 - responded to user
2025-08-15 03:55:41.748 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 03:55:41.748 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query ID: 3caf391b-4570-42b5-87f7-494ebf99fdb9
2025-08-15 03:55:41.749 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 03:55:41.749 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 03:55:41.749 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 03:55:41.749 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! It's great that you're reaching out for information. However, I want to remind you that it's ...
2025-08-15 03:55:41.749 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 03:55:41.750 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T03:55:41.747173900
2025-08-15 03:55:41.750 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 03:55:41.750 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 03:56:08.825 [HealthAssistantSystem-scheduler-1] ERROR c.h.http.HealthAssistantHttpServer - Error processing query
java.util.concurrent.CompletionException: java.util.concurrent.TimeoutException: Ask timed out on [Actor[akka://HealthAssistantSystem/system/singletonProxyhealth-assistant-router-no-dc#-810513251]] after [180000 ms]. Message of type [com.healthassistant.messages.RouterMessages$UserQuery]. A typical reason for `AskTimeoutException` is that the recipient actor didn't send a reply.
	at java.base/java.util.concurrent.CompletableFuture.wrapInCompletionException(CompletableFuture.java:325)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:378)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:393)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:682)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:556)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2246)
	at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:29)
	at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:26)
	at scala.concurrent.impl.Promise$Transformation.run(Promise.scala:484)
	at scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)
	at scala.concurrent.impl.Promise$Transformation.submitWithValue(Promise.scala:429)
	at scala.concurrent.impl.Promise$DefaultPromise.submitWithValue(Promise.scala:335)
	at scala.concurrent.impl.Promise$DefaultPromise.tryComplete0(Promise.scala:285)
	at scala.concurrent.impl.Promise$DefaultPromise.tryComplete(Promise.scala:278)
	at akka.pattern.PromiseActorRef$.$anonfun$apply$1(AskSupport.scala:730)
	at akka.actor.Scheduler$$anon$7.run(Scheduler.scala:478)
	at scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)
	at akka.actor.LightArrayRevolverScheduler$TaskHolder.executeTask(LightArrayRevolverScheduler.scala:365)
	at akka.actor.LightArrayRevolverScheduler$$anon$3.executeBucket$1(LightArrayRevolverScheduler.scala:314)
	at akka.actor.LightArrayRevolverScheduler$$anon$3.nextTick(LightArrayRevolverScheduler.scala:318)
	at akka.actor.LightArrayRevolverScheduler$$anon$3.run(LightArrayRevolverScheduler.scala:270)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.util.concurrent.TimeoutException: Ask timed out on [Actor[akka://HealthAssistantSystem/system/singletonProxyhealth-assistant-router-no-dc#-810513251]] after [180000 ms]. Message of type [com.healthassistant.messages.RouterMessages$UserQuery]. A typical reason for `AskTimeoutException` is that the recipient actor didn't send a reply.
	at akka.actor.typed.scaladsl.AskPattern$.$anonfun$onTimeout$1(AskPattern.scala:132)
	... 8 common frames omitted
2025-08-15 04:01:30.155 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 04:01:30.155 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.RouterActor - Routing query c5a6aa44-54e5-42ee-9656-5321fe14f06a from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 04:01:30.156 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.RouterActor - Successfully routed query c5a6aa44-54e5-42ee-9656-5321fe14f06a to general-medicine department using 'tell' pattern
2025-08-15 04:01:30.156 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query c5a6aa44-54e5-42ee-9656-5321fe14f06a from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 04:01:30.156 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent query c5a6aa44-54e5-42ee-9656-5321fe14f06a to LLMActor using 'ask' pattern
2025-08-15 04:01:30.156 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - Processing query c5a6aa44-54e5-42ee-9656-5321fe14f06a on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:01:30.156 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 04:01:30.157 [ForkJoinPool.commonPool-worker-15] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:01:34.884 [ForkJoinPool.commonPool-worker-15] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 417
2025-08-15 04:01:34.884 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query c5a6aa44-54e5-42ee-9656-5321fe14f06a, response length: 417
2025-08-15 04:01:34.885 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query c5a6aa44-54e5-42ee-9656-5321fe14f06a (success: true)
2025-08-15 04:01:34.885 [ForkJoinPool.commonPool-worker-15] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query c5a6aa44-54e5-42ee-9656-5321fe14f06a: success=true
2025-08-15 04:01:34.885 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query c5a6aa44-54e5-42ee-9656-5321fe14f06a to LoggerActor using 'tell' pattern
2025-08-15 04:01:34.885 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query c5a6aa44-54e5-42ee-9656-5321fe14f06a from user monitor-test to general-medicine department (tell pattern)
2025-08-15 04:01:34.885 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query c5a6aa44-54e5-42ee-9656-5321fe14f06a - responded to user
2025-08-15 04:01:34.886 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:01:34.886 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query ID: c5a6aa44-54e5-42ee-9656-5321fe14f06a
2025-08-15 04:01:34.886 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 04:01:34.886 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 04:01:34.886 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 04:01:34.887 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! I'm here to help answer your health-related questions. Please know that I'm not a substitute ...
2025-08-15 04:01:34.887 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:01:34.887 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:01:34.885867900
2025-08-15 04:01:34.887 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:01:34.887 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:05:00.851 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Routing query 64409089-1ddf-4c3c-9291-e499b244b11f from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 64409089-1ddf-4c3c-9291-e499b244b11f to general-medicine department using 'tell' pattern
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 64409089-1ddf-4c3c-9291-e499b244b11f from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.GeneralMedicineActor - Sent query 64409089-1ddf-4c3c-9291-e499b244b11f to LLMActor using 'ask' pattern
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - Processing query 64409089-1ddf-4c3c-9291-e499b244b11f on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:05:00.852 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 04:05:00.852 [ForkJoinPool.commonPool-worker-16] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:05:04.932 [ForkJoinPool.commonPool-worker-16] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 734
2025-08-15 04:05:04.933 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 64409089-1ddf-4c3c-9291-e499b244b11f, response length: 734
2025-08-15 04:05:04.933 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 64409089-1ddf-4c3c-9291-e499b244b11f (success: true)
2025-08-15 04:05:04.933 [ForkJoinPool.commonPool-worker-16] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 64409089-1ddf-4c3c-9291-e499b244b11f: success=true
2025-08-15 04:05:04.933 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 64409089-1ddf-4c3c-9291-e499b244b11f to LoggerActor using 'tell' pattern
2025-08-15 04:05:04.933 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 64409089-1ddf-4c3c-9291-e499b244b11f from user monitor-test to general-medicine department (tell pattern)
2025-08-15 04:05:04.934 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 64409089-1ddf-4c3c-9291-e499b244b11f - responded to user
2025-08-15 04:05:04.934 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:05:04.934 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query ID: 64409089-1ddf-4c3c-9291-e499b244b11f
2025-08-15 04:05:04.934 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 04:05:04.935 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 04:05:04.935 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 04:05:04.935 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! I'm here to help with any health-related questions you may have. Please feel free to ask me a...
2025-08-15 04:05:04.935 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:05:04.936 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:05:04.933608700
2025-08-15 04:05:04.936 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:05:04.936 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:05:13.597 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-001: I have been experiencing chest pain and shortness of breath. Should I be worried?
2025-08-15 04:05:13.598 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Routing query 570ebe55-aea0-4000-8ce4-940f3804785e from user patient-001 to department: general-medicine (Query: 'I have been experiencing chest pain and shortness of breath. Should I be worried?')
2025-08-15 04:05:13.598 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 570ebe55-aea0-4000-8ce4-940f3804785e to general-medicine department using 'tell' pattern
2025-08-15 04:05:13.598 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 570ebe55-aea0-4000-8ce4-940f3804785e from user patient-001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 04:05:13.598 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Sent query 570ebe55-aea0-4000-8ce4-940f3804785e to LLMActor using 'ask' pattern
2025-08-15 04:05:13.598 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Processing query 570ebe55-aea0-4000-8ce4-940f3804785e on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:05:13.599 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=653
2025-08-15 04:05:13.599 [ForkJoinPool.commonPool-worker-16] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=653, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have been experiencing chest pain and shortness of breath. Should I be worried?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:05:31.650 [ForkJoinPool.commonPool-worker-16] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2378
2025-08-15 04:05:31.651 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 570ebe55-aea0-4000-8ce4-940f3804785e, response length: 2378
2025-08-15 04:05:31.651 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 570ebe55-aea0-4000-8ce4-940f3804785e (success: true)
2025-08-15 04:05:31.651 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 570ebe55-aea0-4000-8ce4-940f3804785e to LoggerActor using 'tell' pattern
2025-08-15 04:05:31.651 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 570ebe55-aea0-4000-8ce4-940f3804785e - responded to user
2025-08-15 04:05:31.651 [ForkJoinPool.commonPool-worker-16] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 570ebe55-aea0-4000-8ce4-940f3804785e: success=true
2025-08-15 04:05:31.651 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 570ebe55-aea0-4000-8ce4-940f3804785e from user patient-001 to general-medicine department (tell pattern)
2025-08-15 04:05:31.652 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:05:31.652 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query ID: 570ebe55-aea0-4000-8ce4-940f3804785e
2025-08-15 04:05:31.652 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-001
2025-08-15 04:05:31.652 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query: I have been experiencing chest pain and shortness of breath. Should I be worried?
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a medical professional, but I can provide some general information that may help. If you're ...
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:05:31.651717400
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:05:31.653 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:10:32.930 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-002: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?
2025-08-15 04:10:32.931 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Routing query 0487e1c2-c829-41a1-81a1-eb34bf5a018d from user patient-002 to department: pharmacy (Query: 'What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?')
2025-08-15 04:10:32.932 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 0487e1c2-c829-41a1-81a1-eb34bf5a018d to pharmacy department using 'tell' pattern
2025-08-15 04:10:32.932 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 0487e1c2-c829-41a1-81a1-eb34bf5a018d from user patient-002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 04:10:32.932 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 0487e1c2-c829-41a1-81a1-eb34bf5a018d to LLMActor for processing
2025-08-15 04:10:32.932 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Processing query 0487e1c2-c829-41a1-81a1-eb34bf5a018d on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:10:32.932 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=708
2025-08-15 04:10:32.933 [ForkJoinPool.commonPool-worker-17] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=708, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:10:48.795 [ForkJoinPool.commonPool-worker-17] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2079
2025-08-15 04:10:48.795 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 0487e1c2-c829-41a1-81a1-eb34bf5a018d, response length: 2079
2025-08-15 04:10:48.796 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 0487e1c2-c829-41a1-81a1-eb34bf5a018d (success: true)
2025-08-15 04:10:48.796 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 0487e1c2-c829-41a1-81a1-eb34bf5a018d - will log and forward to original sender
2025-08-15 04:10:48.796 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 0487e1c2-c829-41a1-81a1-eb34bf5a018d response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$g#0]
2025-08-15 04:10:48.796 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 0487e1c2-c829-41a1-81a1-eb34bf5a018d from user patient-002 to pharmacy department (tell pattern)
2025-08-15 04:10:48.796 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:10:48.797 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query ID: 0487e1c2-c829-41a1-81a1-eb34bf5a018d
2025-08-15 04:10:48.797 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-002
2025-08-15 04:10:48.797 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 04:10:48.797 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?
2025-08-15 04:10:48.798 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide general information about ibuprofen. However, for personalized a...
2025-08-15 04:10:48.798 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:10:48.798 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:10:48.796042200
2025-08-15 04:10:48.798 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:10:48.798 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:10:48.799 [ForkJoinPool.commonPool-worker-17] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 0487e1c2-c829-41a1-81a1-eb34bf5a018d: success=true
2025-08-15 04:10:48.799 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 0487e1c2-c829-41a1-81a1-eb34bf5a018d to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$g#0]
2025-08-15 04:12:20.812 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-003: I need to get an MRI scan for my knee. What should I expect and how should I prepare?
2025-08-15 04:12:20.812 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Routing query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 from user patient-003 to department: radiology (Query: 'I need to get an MRI scan for my knee. What should I expect and how should I prepare?')
2025-08-15 04:12:20.813 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.healthassistant.actors.RouterActor - Successfully routed query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 to radiology department using 'tell' pattern
2025-08-15 04:12:20.813 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 from user patient-003 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 04:12:20.813 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.RadiologyActor - Sent radiology query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 to LLMActor using 'ask' pattern
2025-08-15 04:12:20.813 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - Processing query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:12:20.813 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=719
2025-08-15 04:12:20.814 [ForkJoinPool.commonPool-worker-18] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=719, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I need to get an MRI scan for my knee. What should I expect and how should I prepare?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:12:39.977 [ForkJoinPool.commonPool-worker-18] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2325
2025-08-15 04:12:39.978 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query e48e3a47-11ab-40be-ba6f-f72e9919e5e8, response length: 2325
2025-08-15 04:12:39.978 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 (success: true)
2025-08-15 04:12:39.979 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query e48e3a47-11ab-40be-ba6f-f72e9919e5e8
2025-08-15 04:12:39.979 [ForkJoinPool.commonPool-worker-18] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query e48e3a47-11ab-40be-ba6f-f72e9919e5e8: success=true
2025-08-15 04:12:39.979 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent log entry for query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 to LoggerActor using 'tell' pattern
2025-08-15 04:12:39.979 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 from user patient-003 to radiology department (tell pattern)
2025-08-15 04:12:39.979 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query e48e3a47-11ab-40be-ba6f-f72e9919e5e8 using multiple communication patterns
2025-08-15 04:12:39.979 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query ID: e48e3a47-11ab-40be-ba6f-f72e9919e5e8
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-003
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Query: I need to get an MRI scan for my knee. What should I expect and how should I prepare?
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand what to expect from an MRI (Magnetic Resonance Imaging) scan for...
2025-08-15 04:12:39.980 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:12:39.981 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:12:39.979190200
2025-08-15 04:12:39.981 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:12:39.981 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:19:56.866 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-pharmacy-user: What are the side effects of ibuprofen and how should I take it?
2025-08-15 04:19:56.867 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Routing query 9ed01682-a999-4c00-913a-d0f0703ac7af from user test-pharmacy-user to department: pharmacy (Query: 'What are the side effects of ibuprofen and how should I take it?')
2025-08-15 04:19:56.867 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 9ed01682-a999-4c00-913a-d0f0703ac7af to pharmacy department using 'tell' pattern
2025-08-15 04:19:56.867 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 9ed01682-a999-4c00-913a-d0f0703ac7af from user test-pharmacy-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 04:19:56.868 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 9ed01682-a999-4c00-913a-d0f0703ac7af to LLMActor for processing
2025-08-15 04:19:56.868 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Processing query 9ed01682-a999-4c00-913a-d0f0703ac7af on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 04:19:56.868 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=678
2025-08-15 04:19:56.869 [ForkJoinPool.commonPool-worker-19] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=678, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the side effects of ibuprofen and how should I take it?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 04:20:11.078 [ForkJoinPool.commonPool-worker-19] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 1680
2025-08-15 04:20:11.079 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 9ed01682-a999-4c00-913a-d0f0703ac7af, response length: 1680
2025-08-15 04:20:11.080 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 9ed01682-a999-4c00-913a-d0f0703ac7af (success: true)
2025-08-15 04:20:11.081 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 9ed01682-a999-4c00-913a-d0f0703ac7af - will log and forward to original sender
2025-08-15 04:20:11.081 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 9ed01682-a999-4c00-913a-d0f0703ac7af response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$h#0]
2025-08-15 04:20:11.081 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 9ed01682-a999-4c00-913a-d0f0703ac7af from user test-pharmacy-user to pharmacy department (tell pattern)
2025-08-15 04:20:11.081 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 04:20:11.081 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: 9ed01682-a999-4c00-913a-d0f0703ac7af
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: test-pharmacy-user
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: What are the side effects of ibuprofen and how should I take it?
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a licensed medical professional, so I can't provide personalized medical advice. However, I ...
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 04:20:11.082 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T04:20:11.080069
2025-08-15 04:20:11.083 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 04:20:11.083 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 04:20:11.083 [ForkJoinPool.commonPool-worker-19] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 9ed01682-a999-4c00-913a-d0f0703ac7af: success=true
2025-08-15 04:20:11.083 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 9ed01682-a999-4c00-913a-d0f0703ac7af to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$h#0]
2025-08-15 14:55:38.640 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 14:55:39.713 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 14:55:40.528 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 14:55:40.871 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 14:55:40.871 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 14:55:40.980 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#-8933762372740428399], selfDc [default].
2025-08-15 14:55:41.732 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 14:55:41.783 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 14:55:41.784 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:41.787 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 14:55:41.789 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:55:41.789 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 14:55:41.860 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 14:55:42.070 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 14:55:42.071 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 14:55:42.376 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3ce7e5f1, com.mongodb.Jep395RecordCodecProvider@2970ba2, com.mongodb.KotlinCodecProvider@1f3bac5]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:55:42.447 [cluster-ClusterId{value='689f82ae4815c51890eaff59', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=56376300}
2025-08-15 14:55:42.470 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 14:55:42.555 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:55:42.555 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:55:42.556 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 14:55:42.599 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:55:43.305 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 14:55:43.305 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 14:55:43.305 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 14:55:43.305 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 14:55:43.306 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 14:55:43.306 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 14:55:43.306 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 14:55:46.088 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING itself (with roles [general-medicine, dc-default], version [0.0.0]) and forming new cluster
2025-08-15 14:55:46.089 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 14:55:46.101 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 14:55:46.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 14:55:46.139 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 14:55:46.140 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Oldest]
2025-08-15 14:55:46.140 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.152 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 14:55:46.152 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 14:55:46.153 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 14:55:46.154 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.154 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.154 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.154 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.154 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 14:55:46.155 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.155 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:55:46.160 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3ce7e5f1, com.mongodb.Jep395RecordCodecProvider@2970ba2, com.mongodb.KotlinCodecProvider@1f3bac5]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:55:46.160 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3ce7e5f1, com.mongodb.Jep395RecordCodecProvider@2970ba2, com.mongodb.KotlinCodecProvider@1f3bac5]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:55:46.160 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@3ce7e5f1, com.mongodb.Jep395RecordCodecProvider@2970ba2, com.mongodb.KotlinCodecProvider@1f3bac5]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:55:46.163 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 14:55:46.161 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 14:55:46.162 [cluster-ClusterId{value='689f82b24815c51890eaff5c', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3154100}
2025-08-15 14:55:46.163 [cluster-ClusterId{value='689f82b24815c51890eaff5a', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3736300}
2025-08-15 14:55:46.163 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 14:55:46.163 [cluster-ClusterId{value='689f82b24815c51890eaff5b', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3387000}
2025-08-15 14:55:46.173 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:55:46.173 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:55:46.173 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:55:46.173 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:55:46.174 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:55:46.174 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:55:46.174 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 14:55:46.174 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 14:55:46.174 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 14:55:46.176 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:55:46.176 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:55:46.176 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:55:46.350 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 14:55:46.352 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 14:55:46.352 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 14:55:46.352 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 14:55:46.353 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 14:55:46.354 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 14:55:46.367 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#-1316156109] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 14:55:46.367 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#302059668] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 14:55:46.368 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#438548729] was unhandled. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 14:55:47.135 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 14:55:50.128 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: pharmacy
2025-08-15 14:55:50.983 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 14:55:51.666 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Starting up, Akka version [2.8.5] ...
2025-08-15 14:55:51.863 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 14:55:51.863 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Started up successfully
2025-08-15 14:55:52.010 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2552#-7007236535001603893], selfDc [default].
2025-08-15 14:55:52.667 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 14:55:52.699 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 14:55:52.700 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2552
2025-08-15 14:55:52.703 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [pharmacy, dc-default]
2025-08-15 14:55:52.706 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:55:52.706 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 14:55:52.771 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 14:55:53.282 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@207ff8be, com.mongodb.Jep395RecordCodecProvider@ae7b441, com.mongodb.KotlinCodecProvider@735ec42c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:55:53.356 [cluster-ClusterId{value='689f82b9e15d9b0b51b24444', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=69930000}
2025-08-15 14:55:53.443 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:55:53.443 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:55:53.444 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2552 with MongoDB connection
2025-08-15 14:55:53.480 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:55:53.944 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8081
2025-08-15 14:55:53.944 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8081
2025-08-15 14:55:53.944 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 14:55:53.944 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 14:55:53.945 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8081/health - Health check
2025-08-15 14:55:53.945 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8081/query - Submit medical query
2025-08-15 14:55:53.945 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8081/info - System information
2025-08-15 14:55:55.426 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2552/system/cluster/core/daemon/joinSeedNodeProcess-1#1807074169]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:55:55.427 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2552/system/cluster/core/daemon/joinSeedNodeProcess-1#1807074169]] (version [2.8.5])
2025-08-15 14:55:55.516 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon#1997988026]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:55:55.540 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2552] is JOINING, roles [pharmacy, dc-default], version [0.0.0]
2025-08-15 14:55:55.590 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:55:55.672 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2551/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 14:55:56.199 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Up]
2025-08-15 14:55:57.084 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 14:56:12.788 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: radiology
2025-08-15 14:56:13.586 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 14:56:14.252 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Starting up, Akka version [2.8.5] ...
2025-08-15 14:56:14.428 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 14:56:14.429 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Started up successfully
2025-08-15 14:56:14.567 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2553#96351054192872403], selfDc [default].
2025-08-15 14:56:15.288 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 14:56:15.318 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 14:56:15.319 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2553
2025-08-15 14:56:15.322 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [radiology, dc-default]
2025-08-15 14:56:15.324 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:56:15.325 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 14:56:15.394 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 14:56:15.769 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-1884960083]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:56:15.769 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-1884960083]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:56:15.771 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-1884960083]] (version [2.8.5])
2025-08-15 14:56:15.770 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#-1884960083]] (version [2.8.5])
2025-08-15 14:56:15.838 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon#1997988026]] to [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 14:56:15.883 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2553] is JOINING, roles [radiology, dc-default], version [0.0.0]
2025-08-15 14:56:15.924 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:56:16.049 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2551/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 14:56:16.055 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@fb20c0b, com.mongodb.Jep395RecordCodecProvider@630cee37, com.mongodb.KotlinCodecProvider@28478de3]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:56:16.140 [cluster-ClusterId{value='689f82cfec977409f6c41085', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=114653700}
2025-08-15 14:56:16.286 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:56:16.286 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:56:16.287 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2553 with MongoDB connection
2025-08-15 14:56:16.319 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:56:16.579 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2553] to [Up]
2025-08-15 14:56:16.852 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8082
2025-08-15 14:56:16.853 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 14:56:16.853 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8082
2025-08-15 14:56:16.854 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 14:56:16.854 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/health - Health check
2025-08-15 14:56:16.854 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8082/query - Submit medical query
2025-08-15 14:56:16.855 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/info - System information
2025-08-15 14:56:17.577 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 14:56:43.639 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 14:56:43.649 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Routing query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 14:56:43.650 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 to general-medicine department using 'tell' pattern
2025-08-15 14:56:43.652 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 14:56:43.654 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.GeneralMedicineActor - Sent query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 to LLMActor using 'ask' pattern
2025-08-15 14:56:43.654 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - Processing query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:56:43.655 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 14:56:43.656 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 14:56:46.363 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 14:56:46.364 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 14:56:46.380 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 14:56:46.381 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 14:56:47.168 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 600
2025-08-15 14:56:47.168 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7, response length: 600
2025-08-15 14:56:47.169 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 (success: true)
2025-08-15 14:56:47.169 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7: success=true
2025-08-15 14:56:47.174 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 from user monitor-test to general-medicine department (tell pattern)
2025-08-15 14:56:47.174 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 to LoggerActor using 'tell' pattern
2025-08-15 14:56:47.175 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 14:56:47.175 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 to ChatHistoryActor for MongoDB storage
2025-08-15 14:56:47.175 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: 1b2e73c7-df10-4129-a1af-6c1906f80ac7
2025-08-15 14:56:47.175 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 1b2e73c7-df10-4129-a1af-6c1906f80ac7 - responded to user
2025-08-15 14:56:47.175 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 14:56:47.176 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 14:56:47.176 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 14:56:47.176 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! It's great that you're taking the time to explore your health questions. I'm here to help pro...
2025-08-15 14:56:47.177 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 14:56:47.177 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T14:56:47.170374300
2025-08-15 14:56:47.177 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:56:47.177 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 14:56:47.178 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - Saving chat history for query: 1b2e73c7-df10-4129-a1af-6c1906f80ac7 from user: monitor-test
2025-08-15 14:56:47.215 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.MongoDBService - Saved chat history entry for user: monitor-test, queryId: 1b2e73c7-df10-4129-a1af-6c1906f80ac7
2025-08-15 14:56:47.232 [HealthAssistantSystem-akka.actor.default-dispatcher-31] ERROR akka.actor.SupervisorStrategy - Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
java.lang.NullPointerException: Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
	at com.healthassistant.actors.ChatHistoryActor.lambda$onSaveChatHistory$a2a64687$1(ChatHistoryActor.java:106)
	at akka.actor.typed.internal.ActorContextImpl.$anonfun$pipeToSelf$4(ActorContextImpl.scala:282)
	at akka.actor.typed.internal.AdaptMessage.adapt(InternalMessage.scala:29)
	at akka.actor.typed.internal.adapter.ActorAdapter.$anonfun$aroundReceive$1(ActorAdapter.scala:97)
	at akka.actor.typed.internal.adapter.ActorAdapter.withSafelyAdapted(ActorAdapter.scala:193)
	at akka.actor.typed.internal.adapter.ActorAdapter.aroundReceive(ActorAdapter.scala:97)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:579)
	at akka.actor.ActorCell.invoke(ActorCell.scala:547)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
	at akka.dispatch.Mailbox.run(Mailbox.scala:231)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
2025-08-15 14:56:51.043 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)].
2025-08-15 14:56:51.221 [HealthAssistantSystem-akka.actor.default-dispatcher-31] WARN  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking node as UNREACHABLE [Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)].
2025-08-15 14:56:51.227 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members, waiting for stable-after = 20000 ms before taking downing decision. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T18:57:11.227688500Z.
2025-08-15 14:56:55.361 [HealthAssistantSystem-akka.actor.default-dispatcher-24] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2553,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 14:56:57.415 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 14:56:57.416 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Routing query 2e8f97a7-5337-4e7d-a590-a84fb662c37d from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 14:56:57.416 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 2e8f97a7-5337-4e7d-a590-a84fb662c37d to general-medicine department using 'tell' pattern
2025-08-15 14:56:57.417 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 2e8f97a7-5337-4e7d-a590-a84fb662c37d from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 14:56:57.417 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.GeneralMedicineActor - Sent query 2e8f97a7-5337-4e7d-a590-a84fb662c37d to LLMActor using 'ask' pattern
2025-08-15 14:56:57.417 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Processing query 2e8f97a7-5337-4e7d-a590-a84fb662c37d on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:56:57.417 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 14:56:57.417 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 14:56:58.581 [HealthAssistantSystem-akka.actor.default-dispatcher-31] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2553], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2553,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 14:57:02.655 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 953
2025-08-15 14:57:02.656 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d, response length: 953
2025-08-15 14:57:02.656 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d (success: true)
2025-08-15 14:57:02.656 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d: success=true
2025-08-15 14:57:02.656 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d to LoggerActor using 'tell' pattern
2025-08-15 14:57:02.656 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d from user monitor-test to general-medicine department (tell pattern)
2025-08-15 14:57:02.657 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] was not delivered. [7] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 14:57:02.657 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 2e8f97a7-5337-4e7d-a590-a84fb662c37d to ChatHistoryActor for MongoDB storage
2025-08-15 14:57:02.657 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 14:57:02.657 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 2e8f97a7-5337-4e7d-a590-a84fb662c37d - responded to user
2025-08-15 14:57:02.658 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Query ID: 2e8f97a7-5337-4e7d-a590-a84fb662c37d
2025-08-15 14:57:02.658 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 14:57:02.658 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 14:57:02.659 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 14:57:02.659 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! It's great that you're taking the first step in seeking health information. I'm here to help ...
2025-08-15 14:57:02.659 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 14:57:02.659 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T14:57:02.656575900
2025-08-15 14:57:02.659 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:57:02.660 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 14:57:10.561 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can currently not perform its duties, reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1)], member status: [akka://HealthAssistantSystem@127.0.0.1:2551 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2552 Up seen=true, akka://HealthAssistantSystem@127.0.0.1:2553 Up seen=false]
2025-08-15 14:57:11.675 [HealthAssistantSystem-akka.actor.default-dispatcher-31] WARN  akka.cluster.sbr.SplitBrainResolver - SBR took decision DownUnreachable and is downing [akka://HealthAssistantSystem@127.0.0.1:2553], [1] unreachable of [3] members, all members in DC [Member(akka://HealthAssistantSystem@127.0.0.1:2551, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2552, Up), Member(akka://HealthAssistantSystem@127.0.0.1:2553, Up)], full reachability status: [akka://HealthAssistantSystem@127.0.0.1:2551 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1), akka://HealthAssistantSystem@127.0.0.1:2552 -> akka://HealthAssistantSystem@127.0.0.1:2553: Unreachable [Unreachable] (1)]
2025-08-15 14:57:11.675 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.cluster.sbr.SplitBrainResolver - SBR is downing [UniqueAddress(akka://HealthAssistantSystem@127.0.0.1:2553,96351054192872403)]
2025-08-15 14:57:11.676 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Marking unreachable node [akka://HealthAssistantSystem@127.0.0.1:2553] as [Down]
2025-08-15 14:57:11.676 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.sbr.SplitBrainResolver - SBR found unreachable members changed during stable-after period. Resetting timer. Now 1 unreachable members found. Downing decision will not be made before 2025-08-15T18:57:31.676284900Z.
2025-08-15 14:57:12.597 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader can perform its duties again
2025-08-15 14:57:12.598 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is removing unreachable node [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 14:57:28.091 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: radiology
2025-08-15 14:57:28.967 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 14:57:29.662 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Starting up, Akka version [2.8.5] ...
2025-08-15 14:57:29.864 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 14:57:29.865 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Started up successfully
2025-08-15 14:57:29.996 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2553#-5251563682531997318], selfDc [default].
2025-08-15 14:57:30.692 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 14:57:30.734 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 14:57:30.734 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2553
2025-08-15 14:57:30.737 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [radiology, dc-default]
2025-08-15 14:57:30.741 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:57:30.741 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 14:57:30.824 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 14:57:31.205 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:57:31.205 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:57:31.207 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] (version [2.8.5])
2025-08-15 14:57:31.207 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] (version [2.8.5])
2025-08-15 14:57:31.400 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@744ee5cd, com.mongodb.Jep395RecordCodecProvider@fc65c91, com.mongodb.KotlinCodecProvider@1d313a62]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 14:57:31.480 [cluster-ClusterId{value='689f831b6c7e2b1560ce94df', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=75745300}
2025-08-15 14:57:31.545 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 14:57:31.548 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 14:57:31.549 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2553 with MongoDB connection
2025-08-15 14:57:31.571 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 14:57:32.058 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8082
2025-08-15 14:57:32.058 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 14:57:32.058 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8082
2025-08-15 14:57:32.058 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/health - Health check
2025-08-15 14:57:32.058 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 14:57:32.059 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8082/query - Submit medical query
2025-08-15 14:57:32.059 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8082/info - System information
2025-08-15 14:57:33.462 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Member removed [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 14:57:35.152 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] to [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:57:35.152 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Received InitJoin message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] to [akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 14:57:35.152 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] (version [2.8.5])
2025-08-15 14:57:35.153 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2552] - Sending InitJoinAck message from node [akka://HealthAssistantSystem@127.0.0.1:2552] to [Actor[akka://HealthAssistantSystem@127.0.0.1:2553/system/cluster/core/daemon/joinSeedNodeProcess-1#1878308074]] (version [2.8.5])
2025-08-15 14:57:35.187 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Received InitJoinAck message from [Actor[akka://HealthAssistantSystem@127.0.0.1:2551/system/cluster/core/daemon#1997988026]] to [akka://HealthAssistantSystem@127.0.0.1:2553]
2025-08-15 14:57:35.208 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2553] is JOINING, roles [radiology, dc-default], version [0.0.0]
2025-08-15 14:57:35.230 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2553] - Welcome from [akka://HealthAssistantSystem@127.0.0.1:2551]
2025-08-15 14:57:35.308 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem@127.0.0.1:2551/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 14:57:36.005 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2553] to [Up]
2025-08-15 14:57:37.055 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Younger]
2025-08-15 14:58:08.473 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-001: I have been experiencing chest pain and shortness of breath. Should I be worried?
2025-08-15 14:58:08.474 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Routing query 700f378c-d817-420d-bb98-127a260bb840 from user patient-001 to department: general-medicine (Query: 'I have been experiencing chest pain and shortness of breath. Should I be worried?')
2025-08-15 14:58:08.474 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 700f378c-d817-420d-bb98-127a260bb840 to general-medicine department using 'tell' pattern
2025-08-15 14:58:08.474 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 700f378c-d817-420d-bb98-127a260bb840 from user patient-001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 14:58:08.475 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Sent query 700f378c-d817-420d-bb98-127a260bb840 to LLMActor using 'ask' pattern
2025-08-15 14:58:08.475 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Processing query 700f378c-d817-420d-bb98-127a260bb840 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:58:08.475 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=653
2025-08-15 14:58:08.476 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=653, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have been experiencing chest pain and shortness of breath. Should I be worried?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 14:58:26.689 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2306
2025-08-15 14:58:26.690 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 700f378c-d817-420d-bb98-127a260bb840, response length: 2306
2025-08-15 14:58:26.690 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 700f378c-d817-420d-bb98-127a260bb840 (success: true)
2025-08-15 14:58:26.691 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 700f378c-d817-420d-bb98-127a260bb840: success=true
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 700f378c-d817-420d-bb98-127a260bb840 from user patient-001 to general-medicine department (tell pattern)
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 700f378c-d817-420d-bb98-127a260bb840 to LoggerActor using 'tell' pattern
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] was not delivered. [9] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 700f378c-d817-420d-bb98-127a260bb840 to ChatHistoryActor for MongoDB storage
2025-08-15 14:58:26.691 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query ID: 700f378c-d817-420d-bb98-127a260bb840
2025-08-15 14:58:26.692 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 700f378c-d817-420d-bb98-127a260bb840 - responded to user
2025-08-15 14:58:26.692 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-001
2025-08-15 14:58:26.692 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 14:58:26.692 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query: I have been experiencing chest pain and shortness of breath. Should I be worried?
2025-08-15 14:58:26.692 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide some general information that may help. If you're experiencing c...
2025-08-15 14:58:26.693 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 14:58:26.693 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T14:58:26.691402300
2025-08-15 14:58:26.693 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:58:26.693 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 14:58:51.150 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-002: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?
2025-08-15 14:58:51.151 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Routing query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc from user patient-002 to department: pharmacy (Query: 'What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?')
2025-08-15 14:58:51.151 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc to pharmacy department using 'tell' pattern
2025-08-15 14:58:51.153 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc from user patient-002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 14:58:51.154 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc to LLMActor for processing
2025-08-15 14:58:51.155 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - Processing query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:58:51.155 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=708
2025-08-15 14:58:51.155 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=708, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 14:58:58.600 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 1298
2025-08-15 14:58:58.601 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc, response length: 1298
2025-08-15 14:58:58.601 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc (success: true)
2025-08-15 14:58:58.603 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc - will log and forward to original sender
2025-08-15 14:58:58.603 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - Saving chat history for query: 3926d554-e1f3-4133-a78b-0d4fb4e83ccc from user: patient-002
2025-08-15 14:58:58.603 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc from user patient-002 to pharmacy department (tell pattern)
2025-08-15 14:58:58.603 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 14:58:58.604 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 14:58:58.604 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: 3926d554-e1f3-4133-a78b-0d4fb4e83ccc
2025-08-15 14:58:58.604 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-002
2025-08-15 14:58:58.604 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 14:58:58.605 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: What is the recommended dosage for ibuprofen and can I take it with blood pressure medication?
2025-08-15 14:58:58.605 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a licensed medical professional, so I can't provide personalized medical advice. However, I ...
2025-08-15 14:58:58.605 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 14:58:58.605 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T14:58:58.602407800
2025-08-15 14:58:58.605 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:58:58.606 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 14:58:58.606 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.MongoDBService - Saved chat history entry for user: patient-002, queryId: 3926d554-e1f3-4133-a78b-0d4fb4e83ccc
2025-08-15 14:58:58.607 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc: success=true
2025-08-15 14:58:58.607 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 3926d554-e1f3-4133-a78b-0d4fb4e83ccc to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 14:58:58.607 [HealthAssistantSystem-akka.actor.default-dispatcher-35] ERROR akka.actor.SupervisorStrategy - Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
java.lang.NullPointerException: Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
	at com.healthassistant.actors.ChatHistoryActor.lambda$onSaveChatHistory$a2a64687$1(ChatHistoryActor.java:106)
	at akka.actor.typed.internal.ActorContextImpl.$anonfun$pipeToSelf$4(ActorContextImpl.scala:282)
	at akka.actor.typed.internal.AdaptMessage.adapt(InternalMessage.scala:29)
	at akka.actor.typed.internal.adapter.ActorAdapter.$anonfun$aroundReceive$1(ActorAdapter.scala:97)
	at akka.actor.typed.internal.adapter.ActorAdapter.withSafelyAdapted(ActorAdapter.scala:193)
	at akka.actor.typed.internal.adapter.ActorAdapter.aroundReceive(ActorAdapter.scala:97)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:579)
	at akka.actor.ActorCell.invoke(ActorCell.scala:547)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
	at akka.dispatch.Mailbox.run(Mailbox.scala:231)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
2025-08-15 14:59:00.821 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-003: I need to get an MRI scan for my knee. What should I expect and how should I prepare?
2025-08-15 14:59:00.822 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Routing query 15e36ce6-537b-4576-b835-55e47c9a82b1 from user patient-003 to department: radiology (Query: 'I need to get an MRI scan for my knee. What should I expect and how should I prepare?')
2025-08-15 14:59:00.822 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 15e36ce6-537b-4576-b835-55e47c9a82b1 to radiology department using 'tell' pattern
2025-08-15 14:59:00.824 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query 15e36ce6-537b-4576-b835-55e47c9a82b1 from user patient-003 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 14:59:00.825 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - Sent radiology query 15e36ce6-537b-4576-b835-55e47c9a82b1 to LLMActor using 'ask' pattern
2025-08-15 14:59:00.825 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Processing query 15e36ce6-537b-4576-b835-55e47c9a82b1 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:59:00.826 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=719
2025-08-15 14:59:00.826 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=719, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I need to get an MRI scan for my knee. What should I expect and how should I prepare?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 14:59:20.013 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2311
2025-08-15 14:59:20.014 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 15e36ce6-537b-4576-b835-55e47c9a82b1, response length: 2311
2025-08-15 14:59:20.014 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query 15e36ce6-537b-4576-b835-55e47c9a82b1 (success: true)
2025-08-15 14:59:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query 15e36ce6-537b-4576-b835-55e47c9a82b1
2025-08-15 14:59:20.015 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 15e36ce6-537b-4576-b835-55e47c9a82b1: success=true
2025-08-15 14:59:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - Sent log entry for query 15e36ce6-537b-4576-b835-55e47c9a82b1 to LoggerActor using 'tell' pattern
2025-08-15 14:59:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - Saving chat history for query: 15e36ce6-537b-4576-b835-55e47c9a82b1 from user: patient-003
2025-08-15 14:59:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 15e36ce6-537b-4576-b835-55e47c9a82b1 from user patient-003 to radiology department (tell pattern)
2025-08-15 14:59:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query 15e36ce6-537b-4576-b835-55e47c9a82b1 using multiple communication patterns
2025-08-15 14:59:20.016 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 14:59:20.016 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query ID: 15e36ce6-537b-4576-b835-55e47c9a82b1
2025-08-15 14:59:20.016 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-003
2025-08-15 14:59:20.017 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 14:59:20.017 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query: I need to get an MRI scan for my knee. What should I expect and how should I prepare?
2025-08-15 14:59:20.017 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand what to expect from an MRI (Magnetic Resonance Imaging) scan for...
2025-08-15 14:59:20.017 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 14:59:20.017 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T14:59:20.015535600
2025-08-15 14:59:20.018 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 14:59:20.018 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 14:59:20.019 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.MongoDBService - Saved chat history entry for user: patient-003, queryId: 15e36ce6-537b-4576-b835-55e47c9a82b1
2025-08-15 14:59:20.019 [HealthAssistantSystem-akka.actor.default-dispatcher-35] ERROR akka.actor.SupervisorStrategy - Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
java.lang.NullPointerException: Cannot invoke "akka.actor.typed.ActorRef.tell(Object)" because "command.replyTo" is null
	at com.healthassistant.actors.ChatHistoryActor.lambda$onSaveChatHistory$a2a64687$1(ChatHistoryActor.java:106)
	at akka.actor.typed.internal.ActorContextImpl.$anonfun$pipeToSelf$4(ActorContextImpl.scala:282)
	at akka.actor.typed.internal.AdaptMessage.adapt(InternalMessage.scala:29)
	at akka.actor.typed.internal.adapter.ActorAdapter.$anonfun$aroundReceive$1(ActorAdapter.scala:97)
	at akka.actor.typed.internal.adapter.ActorAdapter.withSafelyAdapted(ActorAdapter.scala:193)
	at akka.actor.typed.internal.adapter.ActorAdapter.aroundReceive(ActorAdapter.scala:97)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:579)
	at akka.actor.ActorCell.invoke(ActorCell.scala:547)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
	at akka.dispatch.Mailbox.run(Mailbox.scala:231)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
2025-08-15 14:59:44.491 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient-004: What are the early symptoms of diabetes and when should I see a doctor?
2025-08-15 14:59:44.491 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Routing query 18a1d937-7d36-40f2-b2e5-ca6484100410 from user patient-004 to department: radiology (Query: 'What are the early symptoms of diabetes and when should I see a doctor?')
2025-08-15 14:59:44.491 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 18a1d937-7d36-40f2-b2e5-ca6484100410 to radiology department using 'tell' pattern
2025-08-15 14:59:44.491 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query 18a1d937-7d36-40f2-b2e5-ca6484100410 from user patient-004 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 14:59:44.492 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.RadiologyActor - Sent radiology query 18a1d937-7d36-40f2-b2e5-ca6484100410 to LLMActor using 'ask' pattern
2025-08-15 14:59:44.492 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Processing query 18a1d937-7d36-40f2-b2e5-ca6484100410 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 14:59:44.492 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=705
2025-08-15 14:59:44.492 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=705, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the early symptoms of diabetes and when should I see a doctor?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:00:03.155 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2521
2025-08-15 15:00:03.156 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 18a1d937-7d36-40f2-b2e5-ca6484100410, response length: 2521
2025-08-15 15:00:03.156 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query 18a1d937-7d36-40f2-b2e5-ca6484100410 (success: true)
2025-08-15 15:00:03.156 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query 18a1d937-7d36-40f2-b2e5-ca6484100410
2025-08-15 15:00:03.156 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 18a1d937-7d36-40f2-b2e5-ca6484100410: success=true
2025-08-15 15:00:03.157 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent log entry for query 18a1d937-7d36-40f2-b2e5-ca6484100410 to LoggerActor using 'tell' pattern
2025-08-15 15:00:03.157 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 18a1d937-7d36-40f2-b2e5-ca6484100410 from user patient-004 to radiology department (tell pattern)
2025-08-15 15:00:03.158 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query 18a1d937-7d36-40f2-b2e5-ca6484100410 using multiple communication patterns
2025-08-15 15:00:03.158 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:00:03.158 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: 18a1d937-7d36-40f2-b2e5-ca6484100410
2025-08-15 15:00:03.159 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: patient-004
2025-08-15 15:00:03.159 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 15:00:03.160 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: What are the early symptoms of diabetes and when should I see a doctor?
2025-08-15 15:00:03.160 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a medical professional, so I can't provide a diagnosis or treatment plan for diabetes. Howev...
2025-08-15 15:00:03.160 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:00:03.160 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:00:03.157397900
2025-08-15 15:00:03.161 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:00:03.161 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:00:03.163 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-chat-history-actor#1238675033] was not delivered. [10] dead letters encountered, no more dead letters will be logged in next [5.000 min]. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-chat-history-actor#1238675033] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:00:54.698 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-pharmacy-user: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:00:54.699 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Routing query 01147abf-dbb3-464d-beae-0e41110c0a38 from user test-pharmacy-user to department: pharmacy (Query: 'What are the side effects of ibuprofen and how much should I take it?')
2025-08-15 15:00:54.699 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 01147abf-dbb3-464d-beae-0e41110c0a38 to pharmacy department using 'tell' pattern
2025-08-15 15:00:54.699 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 01147abf-dbb3-464d-beae-0e41110c0a38 from user test-pharmacy-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:00:54.700 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 01147abf-dbb3-464d-beae-0e41110c0a38 to LLMActor for processing
2025-08-15 15:00:54.700 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - Processing query 01147abf-dbb3-464d-beae-0e41110c0a38 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:00:54.700 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683
2025-08-15 15:00:54.701 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the side effects of ibuprofen and how much should I take it?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:01:09.958 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2138
2025-08-15 15:01:09.958 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 01147abf-dbb3-464d-beae-0e41110c0a38, response length: 2138
2025-08-15 15:01:09.958 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 01147abf-dbb3-464d-beae-0e41110c0a38 (success: true)
2025-08-15 15:01:09.959 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 01147abf-dbb3-464d-beae-0e41110c0a38 response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$b#0]
2025-08-15 15:01:09.959 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 01147abf-dbb3-464d-beae-0e41110c0a38 - will log and forward to original sender
2025-08-15 15:01:09.959 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 01147abf-dbb3-464d-beae-0e41110c0a38 from user test-pharmacy-user to pharmacy department (tell pattern)
2025-08-15 15:01:09.959 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:01:09.960 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: 01147abf-dbb3-464d-beae-0e41110c0a38
2025-08-15 15:01:09.960 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: test-pharmacy-user
2025-08-15 15:01:09.960 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 15:01:09.960 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:01:09.960 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a medical professional, but I can provide some general information about ibuprofen. If you h...
2025-08-15 15:01:09.961 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:01:09.961 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:01:09.959055500
2025-08-15 15:01:09.961 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:01:09.961 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:01:09.961 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 01147abf-dbb3-464d-beae-0e41110c0a38: success=true
2025-08-15 15:01:09.961 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 01147abf-dbb3-464d-beae-0e41110c0a38 to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$b#0]
2025-08-15 15:07:09.095 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient001: I have a headache and feel nauseous. What could be causing this?
2025-08-15 15:07:09.095 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Routing query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 from user patient001 to department: general-medicine (Query: 'I have a headache and feel nauseous. What could be causing this?')
2025-08-15 15:07:09.096 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 to general-medicine department using 'tell' pattern
2025-08-15 15:07:09.096 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 from user patient001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 15:07:09.096 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - Sent query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 to LLMActor using 'ask' pattern
2025-08-15 15:07:09.096 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  com.healthassistant.actors.LLMActor - Processing query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:07:09.096 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=636
2025-08-15 15:07:09.097 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=636, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have a headache and feel nauseous. What could be causing this?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:07:29.593 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2515
2025-08-15 15:07:29.594 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91, response length: 2515
2025-08-15 15:07:29.594 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 (success: true)
2025-08-15 15:07:29.594 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91: success=true
2025-08-15 15:07:29.594 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 to LoggerActor using 'tell' pattern
2025-08-15 15:07:29.594 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 from user patient001 to general-medicine department (tell pattern)
2025-08-15 15:07:29.595 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] was not delivered. [12] dead letters encountered, of which 1 were not logged. The counter will be reset now. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:07:29.595 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 to ChatHistoryActor for MongoDB storage
2025-08-15 15:07:29.595 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:07:29.595 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 1d69c9cf-64cf-4637-8ef2-869e9c39ce91 - responded to user
2025-08-15 15:07:29.595 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query ID: 1d69c9cf-64cf-4637-8ef2-869e9c39ce91
2025-08-15 15:07:29.596 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - User ID: patient001
2025-08-15 15:07:29.596 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 15:07:29.596 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query: I have a headache and feel nauseous. What could be causing this?
2025-08-15 15:07:29.596 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide some general information that may help. If you're experiencing p...
2025-08-15 15:07:29.597 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:07:29.597 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:07:29.594488300
2025-08-15 15:07:29.598 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:07:29.598 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:07:31.617 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient001: What is the recommended dosage for ibuprofen for adults?
2025-08-15 15:07:31.618 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Routing query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd from user patient001 to department: pharmacy (Query: 'What is the recommended dosage for ibuprofen for adults?')
2025-08-15 15:07:31.618 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Successfully routed query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd to pharmacy department using 'tell' pattern
2025-08-15 15:07:31.618 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd from user patient001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:07:31.619 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - Sent pharmacy query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd to LLMActor for processing
2025-08-15 15:07:31.619 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Processing query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:07:31.619 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=670
2025-08-15 15:07:31.619 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=670, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is the recommended dosage for ibuprofen for adults?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:07:44.294 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 1821
2025-08-15 15:07:44.295 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd, response length: 1821
2025-08-15 15:07:44.295 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd (success: true)
2025-08-15 15:07:44.295 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$c#0]
2025-08-15 15:07:44.296 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#1142113251] was not delivered. [1] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#1142113251] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:07:44.296 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd - will log and forward to original sender
2025-08-15 15:07:44.296 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd from user patient001 to pharmacy department (tell pattern)
2025-08-15 15:07:44.296 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:07:44.296 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query ID: dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd
2025-08-15 15:07:44.297 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - User ID: patient001
2025-08-15 15:07:44.297 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 15:07:44.297 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Query: What is the recommended dosage for ibuprofen for adults?
2025-08-15 15:07:44.297 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide general information about ibuprofen dosing. However, please cons...
2025-08-15 15:07:44.297 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:07:44.298 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:07:44.295037400
2025-08-15 15:07:44.298 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:07:44.298 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:07:44.298 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd: success=true
2025-08-15 15:07:44.298 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query dbcf81fe-ae66-4ae0-ae96-8936ddbd61dd to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$c#0]
2025-08-15 15:07:46.320 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient002: I need to get an MRI scan. What should I expect during the procedure?
2025-08-15 15:07:46.320 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Routing query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 from user patient002 to department: radiology (Query: 'I need to get an MRI scan. What should I expect during the procedure?')
2025-08-15 15:07:46.320 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Successfully routed query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 to radiology department using 'tell' pattern
2025-08-15 15:07:46.320 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 from user patient002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 15:07:46.321 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent radiology query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 to LLMActor using 'ask' pattern
2025-08-15 15:07:46.321 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Processing query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:07:46.321 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=703
2025-08-15 15:07:46.321 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=703, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I need to get an MRI scan. What should I expect during the procedure?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:08:05.110 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2309
2025-08-15 15:08:05.111 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query b722eac8-c12d-49b8-91d4-f6c9c0d654e4, response length: 2309
2025-08-15 15:08:05.111 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 (success: true)
2025-08-15 15:08:05.111 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query b722eac8-c12d-49b8-91d4-f6c9c0d654e4
2025-08-15 15:08:05.111 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query b722eac8-c12d-49b8-91d4-f6c9c0d654e4: success=true
2025-08-15 15:08:05.112 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - Sent log entry for query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 to LoggerActor using 'tell' pattern
2025-08-15 15:08:05.112 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 from user patient002 to radiology department (tell pattern)
2025-08-15 15:08:05.112 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-chat-history-actor#1238675033] was not delivered. [2] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-chat-history-actor#1238675033] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:05.112 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query b722eac8-c12d-49b8-91d4-f6c9c0d654e4 using multiple communication patterns
2025-08-15 15:08:05.112 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:08:05.113 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query ID: b722eac8-c12d-49b8-91d4-f6c9c0d654e4
2025-08-15 15:08:05.113 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - User ID: patient002
2025-08-15 15:08:05.113 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 15:08:05.113 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query: I need to get an MRI scan. What should I expect during the procedure?
2025-08-15 15:08:05.113 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Response: I'd be happy to help you understand what to expect during an MRI (Magnetic Resonance Imaging) scan!
...
2025-08-15 15:08:05.114 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:08:05.114 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:08:05.112040500
2025-08-15 15:08:05.114 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:08:05.114 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:08:07.127 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient001: Can I take aspirin and warfarin together?
2025-08-15 15:08:07.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Routing query a78e2292-6ad4-41e4-8a71-205041b20cec from user patient001 to department: pharmacy (Query: 'Can I take aspirin and warfarin together?')
2025-08-15 15:08:07.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Successfully routed query a78e2292-6ad4-41e4-8a71-205041b20cec to pharmacy department using 'tell' pattern
2025-08-15 15:08:07.128 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query a78e2292-6ad4-41e4-8a71-205041b20cec from user patient001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:08:07.128 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.PharmacyActor - Sent pharmacy query a78e2292-6ad4-41e4-8a71-205041b20cec to LLMActor for processing
2025-08-15 15:08:07.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Processing query a78e2292-6ad4-41e4-8a71-205041b20cec on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:08:07.129 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=655
2025-08-15 15:08:07.129 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=655, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Can I take aspirin and warfarin together?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:08:21.011 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2058
2025-08-15 15:08:21.011 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query a78e2292-6ad4-41e4-8a71-205041b20cec, response length: 2058
2025-08-15 15:08:21.011 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query a78e2292-6ad4-41e4-8a71-205041b20cec (success: true)
2025-08-15 15:08:21.012 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query a78e2292-6ad4-41e4-8a71-205041b20cec - will log and forward to original sender
2025-08-15 15:08:21.012 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query a78e2292-6ad4-41e4-8a71-205041b20cec response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$d#0]
2025-08-15 15:08:21.012 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#1142113251] was not delivered. [3] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#1142113251] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:21.012 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query a78e2292-6ad4-41e4-8a71-205041b20cec from user patient001 to pharmacy department (tell pattern)
2025-08-15 15:08:21.013 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:08:21.013 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Query ID: a78e2292-6ad4-41e4-8a71-205041b20cec
2025-08-15 15:08:21.013 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - User ID: patient001
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Query: Can I take aspirin and warfarin together?
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide some general information about the interaction between aspirin a...
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:08:21.011637600
2025-08-15 15:08:21.014 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:08:21.015 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:08:21.015 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query a78e2292-6ad4-41e4-8a71-205041b20cec to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$d#0]
2025-08-15 15:08:21.015 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query a78e2292-6ad4-41e4-8a71-205041b20cec: success=true
2025-08-15 15:08:23.037 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user patient002: What are the symptoms of diabetes?
2025-08-15 15:08:23.038 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Routing query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c from user patient002 to department: general-medicine (Query: 'What are the symptoms of diabetes?')
2025-08-15 15:08:23.039 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c to general-medicine department using 'tell' pattern
2025-08-15 15:08:23.039 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c from user patient002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 15:08:23.039 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c to LLMActor using 'ask' pattern
2025-08-15 15:08:23.039 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Processing query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:08:23.040 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606
2025-08-15 15:08:23.040 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=606, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the symptoms of diabetes?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:08:37.248 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2004
2025-08-15 15:08:37.249 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c, response length: 2004
2025-08-15 15:08:37.249 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c (success: true)
2025-08-15 15:08:37.249 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c: success=true
2025-08-15 15:08:37.249 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c to LoggerActor using 'tell' pattern
2025-08-15 15:08:37.249 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] was not delivered. [4] dead letters encountered. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:37.249 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c from user patient002 to general-medicine department (tell pattern)
2025-08-15 15:08:37.250 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c to ChatHistoryActor for MongoDB storage
2025-08-15 15:08:37.250 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:08:37.250 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 6ed890aa-24c3-42ec-9dc1-2f01fb16859c - responded to user
2025-08-15 15:08:37.250 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query ID: 6ed890aa-24c3-42ec-9dc1-2f01fb16859c
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - User ID: patient002
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query: What are the symptoms of diabetes?
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Response: I'm happy to help you understand more about diabetes! As a medical assistant, I want to emphasize th...
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:08:37.251 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:08:37.249319400
2025-08-15 15:08:37.252 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:08:37.252 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:08:39.284 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieving chat history for user: patient001, limit: 10
2025-08-15 15:08:39.325 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.MongoDBService - Retrieved 0 chat history entries for user: patient001
2025-08-15 15:08:39.326 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieved 0 chat history entries for user: patient001
2025-08-15 15:08:39.326 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.actor.RepointableActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$GetChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/chat-history-api-actor#-2104982407] was unhandled. [5] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:39.354 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieving chat history for user: patient002, limit: 5
2025-08-15 15:08:39.357 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.MongoDBService - Retrieved 0 chat history entries for user: patient002
2025-08-15 15:08:39.357 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieved 0 chat history entries for user: patient002
2025-08-15 15:08:39.357 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.actor.RepointableActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$GetChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/chat-history-api-actor#-2104982407] was unhandled. [6] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:39.364 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieving chat history for user: patient001, limit: 10
2025-08-15 15:08:39.370 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.MongoDBService - Retrieved 0 chat history entries for user: patient001
2025-08-15 15:08:39.371 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Retrieved 0 chat history entries for user: patient001
2025-08-15 15:08:39.372 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  akka.actor.RepointableActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$GetChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/chat-history-api-actor#-2104982407] was unhandled. [7] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:39.392 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - Generating chat analytics for user: , period: null to null
2025-08-15 15:08:39.417 [ForkJoinPool.commonPool-worker-13] ERROR c.h.services.MongoDBService - Failed to get chat analytics
java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader 'bootstrap')
	at org.bson.Document.getLong(Document.java:286)
	at com.healthassistant.services.MongoDBService.lambda$getChatAnalytics$0(MongoDBService.java:193)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1814)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1806)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
2025-08-15 15:08:39.418 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Generated analytics: 0 total queries, 0 successful, avg response time: 0.0ms
2025-08-15 15:08:39.418 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.actor.RepointableActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$GetChatAnalyticsResponse] to Actor[akka://HealthAssistantSystem/system/chat-history-api-actor#-2104982407] was unhandled. [8] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:08:39.453 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Generating chat analytics for user: patient001, period: null to null
2025-08-15 15:08:39.464 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.MongoDBService - Generated chat analytics: {averageResponseTime=0.0, totalQueries=0, mostPopularDepartment=N/A, successfulQueries=0}
2025-08-15 15:08:39.465 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.ChatHistoryActor - Generated analytics: 0 total queries, 0 successful, avg response time: 0.0ms
2025-08-15 15:08:39.465 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  akka.actor.RepointableActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$GetChatAnalyticsResponse] to Actor[akka://HealthAssistantSystem/system/chat-history-api-actor#-2104982407] was unhandled. [9] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:12:36.973 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-debug-user: Test query for MongoDB
2025-08-15 15:12:36.974 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.RouterActor - Routing query d0f625b2-3df5-450d-9f7b-1c573edd12e8 from user test-debug-user to department: general-medicine (Query: 'Test query for MongoDB')
2025-08-15 15:12:36.974 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.healthassistant.actors.RouterActor - Successfully routed query d0f625b2-3df5-450d-9f7b-1c573edd12e8 to general-medicine department using 'tell' pattern
2025-08-15 15:12:36.974 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query d0f625b2-3df5-450d-9f7b-1c573edd12e8 from user test-debug-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 15:12:36.975 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.h.actors.GeneralMedicineActor - Sent query d0f625b2-3df5-450d-9f7b-1c573edd12e8 to LLMActor using 'ask' pattern
2025-08-15 15:12:36.975 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - Processing query d0f625b2-3df5-450d-9f7b-1c573edd12e8 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:12:36.975 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=594
2025-08-15 15:12:36.975 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=594, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Test query for MongoDB","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:12:38.656 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 253
2025-08-15 15:12:38.656 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query d0f625b2-3df5-450d-9f7b-1c573edd12e8, response length: 253
2025-08-15 15:12:38.656 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query d0f625b2-3df5-450d-9f7b-1c573edd12e8 (success: true)
2025-08-15 15:12:38.657 [ForkJoinPool.commonPool-worker-14] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query d0f625b2-3df5-450d-9f7b-1c573edd12e8: success=true
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query d0f625b2-3df5-450d-9f7b-1c573edd12e8 from user test-debug-user to general-medicine department (tell pattern)
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query d0f625b2-3df5-450d-9f7b-1c573edd12e8 to LoggerActor using 'tell' pattern
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistory] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] was not delivered. [10] dead letters encountered, no more dead letters will be logged in next [5.000 min]. If this is not an expected behavior then Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-1579185850] may have terminated unexpectedly. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query d0f625b2-3df5-450d-9f7b-1c573edd12e8 to ChatHistoryActor for MongoDB storage
2025-08-15 15:12:38.657 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query ID: d0f625b2-3df5-450d-9f7b-1c573edd12e8
2025-08-15 15:12:38.658 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.GeneralMedicineActor - Completed processing query d0f625b2-3df5-450d-9f7b-1c573edd12e8 - responded to user
2025-08-15 15:12:38.658 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - User ID: test-debug-user
2025-08-15 15:12:38.658 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 15:12:38.658 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Query: Test query for MongoDB
2025-08-15 15:12:38.659 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not able to assist with technical queries related to MongoDB or other software platforms. If you...
2025-08-15 15:12:38.659 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:12:38.659 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:12:38.657804700
2025-08-15 15:12:38.659 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:12:38.659 [HealthAssistantSystem-akka.actor.default-dispatcher-35] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:15:21.589 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:15:21.590 [HealthAssistantSystem-akka.actor.default-dispatcher-6] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:15:21.619 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:15:21.620 [HealthAssistantSystem-akka.actor.default-dispatcher-3] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2551], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:15:22.288 [HealthAssistantSystem-akka.actor.default-dispatcher-30] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:15:22.291 [HealthAssistantSystem-akka.actor.default-dispatcher-30] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: The connection closed with error: Connection reset
2025-08-15 15:16:53.404 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 15:16:54.251 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 15:16:55.207 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 15:16:55.418 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 15:16:55.419 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 15:16:55.545 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#5600058954387529574], selfDc [default].
2025-08-15 15:16:56.267 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 15:16:56.299 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 15:16:56.300 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:16:56.302 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 15:16:56.305 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 15:16:56.306 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 15:16:56.353 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 15:16:56.599 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:16:56.600 [HealthAssistantSystem-akka.actor.default-dispatcher-25] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:16:56.857 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@207ff8be, com.mongodb.Jep395RecordCodecProvider@ae7b441, com.mongodb.KotlinCodecProvider@735ec42c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:16:56.941 [cluster-ClusterId{value='689f87a869d01b5c4efb9e7a', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=94145400}
2025-08-15 15:16:57.032 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:16:57.032 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:16:57.032 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:16:57.062 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:16:57.556 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 15:16:57.557 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 15:16:57.558 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 15:16:57.558 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 15:16:57.559 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 15:16:57.559 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 15:16:57.559 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 15:17:00.660 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING itself (with roles [general-medicine, dc-default], version [0.0.0]) and forming new cluster
2025-08-15 15:17:00.662 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 15:17:00.674 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 15:17:00.709 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 15:17:00.719 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:17:00.720 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Oldest]
2025-08-15 15:17:00.720 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.734 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 15:17:00.734 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:17:00.734 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:17:00.735 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:17:00.735 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.735 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.736 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.735 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.735 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.736 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:00.742 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@207ff8be, com.mongodb.Jep395RecordCodecProvider@ae7b441, com.mongodb.KotlinCodecProvider@735ec42c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:17:00.742 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@207ff8be, com.mongodb.Jep395RecordCodecProvider@ae7b441, com.mongodb.KotlinCodecProvider@735ec42c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:17:00.742 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@207ff8be, com.mongodb.Jep395RecordCodecProvider@ae7b441, com.mongodb.KotlinCodecProvider@735ec42c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:17:00.745 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:17:00.744 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:17:00.745 [cluster-ClusterId{value='689f87ac69d01b5c4efb9e7d', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2688100}
2025-08-15 15:17:00.745 [cluster-ClusterId{value='689f87ac69d01b5c4efb9e7c', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2877300}
2025-08-15 15:17:00.745 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:17:00.745 [cluster-ClusterId{value='689f87ac69d01b5c4efb9e7b', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=4804500}
2025-08-15 15:17:00.759 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:17:00.759 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:17:00.759 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:17:00.760 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:17:00.760 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:17:00.760 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:17:00.760 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:17:00.760 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:17:00.761 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:17:00.762 [HealthAssistantSystem-akka.actor.default-dispatcher-33] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:17:00.762 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:17:00.762 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:17:01.712 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:17:15.722 [HealthAssistantSystem-akka.actor.default-dispatcher-34] WARN  akka.remote.artery.Association - Outbound control stream to [akka://HealthAssistantSystem@127.0.0.1:2552] failed. Restarting it. akka.remote.artery.OutboundHandshake$HandshakeTimeoutException: Handshake with [akka://HealthAssistantSystem@127.0.0.1:2552] did not complete within 20000 ms
2025-08-15 15:17:52.619 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-patient-001: I have a persistent headache and feel dizzy. What could be causing this?
2025-08-15 15:17:52.630 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.healthassistant.actors.RouterActor - Routing query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc from user test-patient-001 to department: general-medicine (Query: 'I have a persistent headache and feel dizzy. What could be causing this?')
2025-08-15 15:17:52.631 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc to general-medicine department using 'tell' pattern
2025-08-15 15:17:52.633 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc from user test-patient-001 on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 15:17:52.636 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc to LLMActor using 'ask' pattern
2025-08-15 15:17:52.637 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  com.healthassistant.actors.LLMActor - Processing query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:17:52.637 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=644
2025-08-15 15:17:52.638 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=644, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have a persistent headache and feel dizzy. What could be causing this?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:17:59.066 [HealthAssistantSystem-akka.actor.default-dispatcher-30] ERROR c.h.services.OllamaService - Error communicating with Ollama
java.util.concurrent.CompletionException: akka.stream.StreamTcpException: Tcp command [Connect(localhost/<unresolved>:11434,None,List(),Some(10 seconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
	at java.base/java.util.concurrent.CompletableFuture.wrapInCompletionException(CompletableFuture.java:325)
	at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:414)
	at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:423)
	at java.base/java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:1143)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:556)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2246)
	at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:29)
	at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:26)
	at scala.concurrent.impl.Promise$Transformation.run(Promise.scala:484)
	at scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)
	at scala.concurrent.impl.Promise$Transformation.submitWithValue(Promise.scala:429)
	at scala.concurrent.impl.Promise$DefaultPromise.submitWithValue(Promise.scala:338)
	at scala.concurrent.impl.Promise$DefaultPromise.tryComplete0(Promise.scala:285)
	at scala.concurrent.impl.Promise$DefaultPromise.tryComplete(Promise.scala:278)
	at scala.concurrent.Promise.complete(Promise.scala:57)
	at scala.concurrent.Promise.complete$(Promise.scala:56)
	at scala.concurrent.impl.Promise$DefaultPromise.complete(Promise.scala:104)
	at akka.http.impl.engine.client.PoolInterface$Logic.onPush(PoolInterface.scala:139)
	at akka.stream.impl.fusing.GraphInterpreter.processPush(GraphInterpreter.scala:556)
	at akka.stream.impl.fusing.GraphInterpreter.processEvent(GraphInterpreter.scala:510)
	at akka.stream.impl.fusing.GraphInterpreter.execute(GraphInterpreter.scala:402)
	at akka.stream.impl.fusing.GraphInterpreterShell.runBatch(ActorGraphInterpreter.scala:650)
	at akka.stream.impl.fusing.GraphInterpreterShell$AsyncInput.execute(ActorGraphInterpreter.scala:521)
	at akka.stream.impl.fusing.GraphInterpreterShell.processEvent(ActorGraphInterpreter.scala:625)
	at akka.stream.impl.fusing.ActorGraphInterpreter.akka$stream$impl$fusing$ActorGraphInterpreter$$processEvent(ActorGraphInterpreter.scala:800)
	at akka.stream.impl.fusing.ActorGraphInterpreter$$anonfun$receive$1.applyOrElse(ActorGraphInterpreter.scala:818)
	at akka.actor.Actor.aroundReceive(Actor.scala:537)
	at akka.actor.Actor.aroundReceive$(Actor.scala:535)
	at akka.stream.impl.fusing.ActorGraphInterpreter.aroundReceive(ActorGraphInterpreter.scala:716)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:579)
	at akka.actor.ActorCell.invoke(ActorCell.scala:547)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
	at akka.dispatch.Mailbox.run(Mailbox.scala:231)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
Caused by: akka.stream.StreamTcpException: Tcp command [Connect(localhost/<unresolved>:11434,None,List(),Some(10 seconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:628)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:1046)
	at akka.io.TcpOutgoingConnection$$anonfun$connecting$1.$anonfun$applyOrElse$4(TcpOutgoingConnection.scala:111)
	at akka.io.TcpOutgoingConnection.akka$io$TcpOutgoingConnection$$reportConnectFailure(TcpOutgoingConnection.scala:53)
	at akka.io.TcpOutgoingConnection$$anonfun$connecting$1.applyOrElse(TcpOutgoingConnection.scala:111)
	at akka.actor.Actor.aroundReceive(Actor.scala:537)
	at akka.actor.Actor.aroundReceive$(Actor.scala:535)
	at akka.io.TcpConnection.aroundReceive(TcpConnection.scala:32)
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:579)
	at akka.actor.ActorCell.invoke(ActorCell.scala:547)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:270)
	at akka.dispatch.Mailbox.run(Mailbox.scala:231)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:243)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:507)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1394)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1970)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:187)
2025-08-15 15:17:59.068 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc, response length: 111
2025-08-15 15:17:59.069 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc (success: true)
2025-08-15 15:17:59.069 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc: success=true
2025-08-15 15:17:59.079 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc to LoggerActor using 'tell' pattern
2025-08-15 15:17:59.079 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc to ChatHistoryActor for MongoDB storage
2025-08-15 15:17:59.079 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.actors.GeneralMedicineActor - Completed processing query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc - responded to user
2025-08-15 15:17:59.080 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 01ffc27d-19d1-43d3-ba22-f08e661ccdbc from user test-patient-001 to general-medicine department (tell pattern)
2025-08-15 15:17:59.080 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:17:59.080 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query ID: 01ffc27d-19d1-43d3-ba22-f08e661ccdbc
2025-08-15 15:17:59.081 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - User ID: test-patient-001
2025-08-15 15:17:59.081 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 15:17:59.081 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query: I have a persistent headache and feel dizzy. What could be causing this?
2025-08-15 15:17:59.081 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Response: I apologize, but I'm currently unable to process your request due to a technical issue. Please try a...
2025-08-15 15:17:59.082 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:17:59.082 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:17:59.071208200
2025-08-15 15:17:59.082 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:17:59.082 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:17:59.086 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - Saving chat history (fire-and-forget) for query: 01ffc27d-19d1-43d3-ba22-f08e661ccdbc from user: test-patient-001
2025-08-15 15:17:59.117 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.MongoDBService - Saved chat history entry for user: test-patient-001, queryId: 01ffc27d-19d1-43d3-ba22-f08e661ccdbc
2025-08-15 15:17:59.118 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully saved chat history to MongoDB: 01ffc27d-19d1-43d3-ba22-f08e661ccdbc for user: test-patient-001
2025-08-15 15:17:59.121 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-522118] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:18:02.394 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-patient-002: What is the recommended dosage for acetaminophen for severe headache?
2025-08-15 15:18:02.395 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Routing query cfe9e7ec-3bfb-40a7-8261-d352d21b4b8c from user test-patient-002 to department: pharmacy (Query: 'What is the recommended dosage for acetaminophen for severe headache?')
2025-08-15 15:18:02.395 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.actors.RouterActor - Successfully routed query cfe9e7ec-3bfb-40a7-8261-d352d21b4b8c to pharmacy department using 'tell' pattern
2025-08-15 15:18:02.397 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query cfe9e7ec-3bfb-40a7-8261-d352d21b4b8c from user test-patient-002 on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:18:02.398 [HealthAssistantSystem-akka.actor.default-dispatcher-34] INFO  c.h.actors.PharmacyActor - Sent pharmacy query cfe9e7ec-3bfb-40a7-8261-d352d21b4b8c to LLMActor for processing
2025-08-15 15:18:02.398 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Processing query cfe9e7ec-3bfb-40a7-8261-d352d21b4b8c on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:18:02.399 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683
2025-08-15 15:18:02.399 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What is the recommended dosage for acetaminophen for severe headache?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:20:14.641 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 15:20:15.461 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 15:20:16.147 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 15:20:16.328 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 15:20:16.329 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 15:20:16.453 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#-3823543375965915057], selfDc [default].
2025-08-15 15:20:17.170 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 15:20:17.193 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 15:20:17.194 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:17.197 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 15:20:17.199 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 15:20:17.200 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 15:20:17.244 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 15:20:17.457 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:20:17.589 [HealthAssistantSystem-akka.actor.default-dispatcher-26] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:20:17.764 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@441788d9, com.mongodb.Jep395RecordCodecProvider@3ed71305, com.mongodb.KotlinCodecProvider@1dd59f4c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:20:17.826 [cluster-ClusterId{value='689f88719ace80601a87fcf6', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=67370500}
2025-08-15 15:20:17.985 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:20:17.986 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:20:17.986 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:20:18.035 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:20:18.555 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 15:20:18.556 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 15:20:18.557 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 15:20:18.557 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 15:20:18.557 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 15:20:18.557 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 15:20:18.558 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 15:20:21.560 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING itself (with roles [general-medicine, dc-default], version [0.0.0]) and forming new cluster
2025-08-15 15:20:21.562 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 15:20:21.572 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 15:20:21.601 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 15:20:21.610 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:20:21.611 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Oldest]
2025-08-15 15:20:21.612 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.626 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 15:20:21.626 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:20:21.626 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.626 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:20:21.627 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.627 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.627 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:20:21.627 [HealthAssistantSystem-akka.actor.default-dispatcher-26] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.627 [HealthAssistantSystem-akka.actor.default-dispatcher-5] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.628 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:20:21.633 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@441788d9, com.mongodb.Jep395RecordCodecProvider@3ed71305, com.mongodb.KotlinCodecProvider@1dd59f4c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:20:21.633 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@441788d9, com.mongodb.Jep395RecordCodecProvider@3ed71305, com.mongodb.KotlinCodecProvider@1dd59f4c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:20:21.633 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@441788d9, com.mongodb.Jep395RecordCodecProvider@3ed71305, com.mongodb.KotlinCodecProvider@1dd59f4c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:20:21.635 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:20:21.635 [cluster-ClusterId{value='689f88759ace80601a87fcf8', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3096200}
2025-08-15 15:20:21.635 [cluster-ClusterId{value='689f88759ace80601a87fcf7', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3124500}
2025-08-15 15:20:21.637 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:20:21.636 [cluster-ClusterId{value='689f88759ace80601a87fcf9', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2984500}
2025-08-15 15:20:21.636 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:20:21.651 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:20:21.652 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:20:21.652 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:20:21.652 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:20:21.652 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:20:21.652 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:20:21.653 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:20:21.654 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:20:21.654 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:20:21.654 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:20:21.654 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:20:21.655 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:20:21.858 [ForkJoinPool.commonPool-worker-11] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:20:21.860 [ForkJoinPool.commonPool-worker-6] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:20:21.860 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:20:21.860 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:20:21.861 [ForkJoinPool.commonPool-worker-6] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:20:21.861 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:20:21.871 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#-1062552040] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:20:21.872 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#1887120768] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:20:21.873 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#488418063] was unhandled. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:20:22.607 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:20:36.601 [HealthAssistantSystem-akka.actor.default-dispatcher-30] WARN  akka.remote.artery.Association - Outbound control stream to [akka://HealthAssistantSystem@127.0.0.1:2552] failed. Restarting it. akka.remote.artery.OutboundHandshake$HandshakeTimeoutException: Handshake with [akka://HealthAssistantSystem@127.0.0.1:2552] did not complete within 20000 ms
2025-08-15 15:20:51.307 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-pharmacy-user: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:20:51.320 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Routing query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 from user test-pharmacy-user to department: pharmacy (Query: 'What are the side effects of ibuprofen and how much should I take it?')
2025-08-15 15:20:51.322 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.RouterActor - Successfully routed query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 to pharmacy department using 'tell' pattern
2025-08-15 15:20:51.324 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 from user test-pharmacy-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:20:51.329 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - Sent pharmacy query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 to LLMActor for processing
2025-08-15 15:20:51.329 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  com.healthassistant.actors.LLMActor - Processing query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:20:51.329 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683
2025-08-15 15:20:51.330 [ForkJoinPool.commonPool-worker-6] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the side effects of ibuprofen and how much should I take it?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:21:07.259 [ForkJoinPool.commonPool-worker-6] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2149
2025-08-15 15:21:07.260 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query 6254cc0d-0c4c-4d37-932a-a9033754c9a0, response length: 2149
2025-08-15 15:21:07.261 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 (success: true)
2025-08-15 15:21:07.267 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 15:21:07.270 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 - will log and forward to original sender
2025-08-15 15:21:07.270 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 from user test-pharmacy-user to pharmacy department (tell pattern)
2025-08-15 15:21:07.270 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:21:07.271 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query ID: 6254cc0d-0c4c-4d37-932a-a9033754c9a0
2025-08-15 15:21:07.271 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - User ID: test-pharmacy-user
2025-08-15 15:21:07.271 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 15:21:07.271 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.ChatHistoryActor - Saving chat history (fire-and-forget) for query: 6254cc0d-0c4c-4d37-932a-a9033754c9a0 from user: test-pharmacy-user
2025-08-15 15:21:07.271 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Query: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:21:07.272 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Response: I can't provide medical advice, but I can give you some general information about ibuprofen. If you ...
2025-08-15 15:21:07.272 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:21:07.272 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:21:07.262838400
2025-08-15 15:21:07.272 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:21:07.273 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:21:07.275 [ForkJoinPool.commonPool-worker-11] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query 6254cc0d-0c4c-4d37-932a-a9033754c9a0: success=true
2025-08-15 15:21:07.276 [HealthAssistantSystem-akka.actor.default-dispatcher-25] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query 6254cc0d-0c4c-4d37-932a-a9033754c9a0 to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 15:21:07.310 [ForkJoinPool.commonPool-worker-6] INFO  c.h.services.MongoDBService - Saved chat history entry for user: test-pharmacy-user, queryId: 6254cc0d-0c4c-4d37-932a-a9033754c9a0
2025-08-15 15:21:07.310 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully saved chat history to MongoDB: 6254cc0d-0c4c-4d37-932a-a9033754c9a0 for user: test-pharmacy-user
2025-08-15 15:21:07.313 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#1573433298] was unhandled. [4] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:44:22.100 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Starting Health Assistant System with config: general-medicine
2025-08-15 15:44:23.149 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2025-08-15 15:44:23.926 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Starting up, Akka version [2.8.5] ...
2025-08-15 15:44:24.209 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Registered cluster JMX MBean [akka:type=Cluster]
2025-08-15 15:44:24.210 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Started up successfully
2025-08-15 15:44:24.306 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  akka.cluster.sbr.SplitBrainResolver - SBR started. Config: strategy [KeepMajority], stable-after [20 seconds], down-all-when-unstable [15 seconds], selfUniqueAddress [akka://HealthAssistantSystem@127.0.0.1:2551#-1738884953976144390], selfDc [default].
2025-08-15 15:44:25.084 [com.healthassistant.HealthAssistantApp.main()] INFO  c.healthassistant.HealthAssistantApp - Health Assistant System started successfully
2025-08-15 15:44:25.119 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - === CLUSTER NODE STARTING ===
2025-08-15 15:44:25.120 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node address: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:25.124 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Node roles: [general-medicine, dc-default]
2025-08-15 15:44:25.128 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster seed nodes: [akka://HealthAssistantSystem@127.0.0.1:2551, akka://HealthAssistantSystem@127.0.0.1:2552]
2025-08-15 15:44:25.129 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - ============================
2025-08-15 15:44:25.196 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Health Assistant Router singleton created
2025-08-15 15:44:25.390 [HealthAssistantSystem-akka.actor.default-dispatcher-24] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], message stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:44:25.391 [HealthAssistantSystem-akka.actor.default-dispatcher-24] WARN  akka.stream.Materializer - [outbound connection to [akka://HealthAssistantSystem@127.0.0.1:2552], control stream] Upstream failed, cause: StreamTcpException: Tcp command [Connect(127.0.0.1/<unresolved>:2552,None,List(),Some(5000 milliseconds),true)] failed because of java.net.ConnectException: Connection refused: getsockopt
2025-08-15 15:44:25.613 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@5ab4b68b, com.mongodb.Jep395RecordCodecProvider@530172b3, com.mongodb.KotlinCodecProvider@75e3a7a]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:44:25.688 [cluster-ClusterId{value='689f8e1916647c394c2aec03', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=64115600}
2025-08-15 15:44:25.782 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:44:25.783 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:44:25.784 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:44:25.809 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:44:26.355 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - HTTP server configuration - Interface: localhost, Port: 8080
2025-08-15 15:44:26.356 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.healthassistant.HealthAssistantApp - Cluster event listeners would be registered here in a full implementation
2025-08-15 15:44:26.358 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Health Assistant HTTP server started at http://localhost:8080
2025-08-15 15:44:26.358 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer - Available endpoints:
2025-08-15 15:44:26.359 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/health - Health check
2025-08-15 15:44:26.359 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   POST http://localhost:8080/query - Submit medical query
2025-08-15 15:44:26.359 [ForkJoinPool.commonPool-worker-8] INFO  c.h.http.HealthAssistantHttpServer -   GET  http://localhost:8080/info - System information
2025-08-15 15:44:29.423 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Node [akka://HealthAssistantSystem@127.0.0.1:2551] is JOINING itself (with roles [general-medicine, dc-default], version [0.0.0]) and forming new cluster
2025-08-15 15:44:29.425 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - is the new leader among reachable nodes (more leaders may exist)
2025-08-15 15:44:29.439 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.Cluster - Cluster Node [akka://HealthAssistantSystem@127.0.0.1:2551] - Leader is moving node [akka://HealthAssistantSystem@127.0.0.1:2551] to [Up]
2025-08-15 15:44:29.473 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  akka.cluster.sbr.SplitBrainResolver - This node is now the leader responsible for taking SBR decisions among the reachable nodes (more leaders may exist).
2025-08-15 15:44:29.486 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - Singleton manager starting singleton actor [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:44:29.487 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  a.c.s.ClusterSingletonManager - ClusterSingletonManager state change [Start -> Oldest]
2025-08-15 15:44:29.488 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  c.healthassistant.actors.RouterActor - RouterActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.499 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:44:29.499 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:44:29.499 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.499 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  c.healthassistant.actors.RouterActor - Initialized 3 department actors
2025-08-15 15:44:29.499 [HealthAssistantSystem-akka.actor.default-dispatcher-3] INFO  c.h.actors.PharmacyActor - PharmacyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.500 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.500 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.501 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - LLMActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with Ollama URL: http://localhost:11434, model: llama3.2
2025-08-15 15:44:29.501 [HealthAssistantSystem-akka.actor.default-dispatcher-24] INFO  c.h.actors.RadiologyActor - RadiologyActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.501 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.LoggerActor - LoggerActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:44:29.508 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@5ab4b68b, com.mongodb.Jep395RecordCodecProvider@530172b3, com.mongodb.KotlinCodecProvider@75e3a7a]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:44:29.509 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@5ab4b68b, com.mongodb.Jep395RecordCodecProvider@530172b3, com.mongodb.KotlinCodecProvider@75e3a7a]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:44:29.509 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "4.11.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/24.0.2+12-54"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@5ab4b68b, com.mongodb.Jep395RecordCodecProvider@530172b3, com.mongodb.KotlinCodecProvider@75e3a7a]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-08-15 15:44:29.510 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:44:29.511 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:44:29.511 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  org.mongodb.driver.cluster - No server chosen by WritableServerSelector from cluster description ClusterDescription{type=UNKNOWN, connectionMode=SINGLE, serverDescriptions=[ServerDescription{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2025-08-15 15:44:29.512 [cluster-ClusterId{value='689f8e1d16647c394c2aec05', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=4308800}
2025-08-15 15:44:29.514 [cluster-ClusterId{value='689f8e1d16647c394c2aec04', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=6102300}
2025-08-15 15:44:29.514 [cluster-ClusterId{value='689f8e1d16647c394c2aec06', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2923700}
2025-08-15 15:44:29.524 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:44:29.524 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:44:29.524 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - MongoDB indexes created successfully
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.services.MongoDBService - Connected to MongoDB database: health_assistant
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:44:29.526 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ChatHistoryActor started on node: akka://HealthAssistantSystem@127.0.0.1:2551 with MongoDB connection
2025-08-15 15:44:29.528 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:44:29.528 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:44:29.529 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully connected to MongoDB
2025-08-15 15:44:29.680 [ForkJoinPool.commonPool-worker-8] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:44:29.681 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:44:29.681 [ForkJoinPool.commonPool-worker-10] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:44:29.682 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:44:29.683 [ForkJoinPool.commonPool-worker-10] INFO  c.h.services.OllamaService - Ollama availability check: Available
2025-08-15 15:44:29.683 [HealthAssistantSystem-akka.actor.default-dispatcher-6] INFO  com.healthassistant.actors.LLMActor - Ollama service is available and ready
2025-08-15 15:44:29.690 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/llm-actor#430344081] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:44:29.691 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-llm-actor#-1728635671] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:44:29.691 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  akka.actor.LocalActorRef - Message [java.lang.Boolean] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-llm-actor#-88636499] was unhandled. [3] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:44:30.477 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  a.c.singleton.ClusterSingletonProxy - Singleton identified at [akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router]
2025-08-15 15:44:44.459 [HealthAssistantSystem-akka.actor.default-dispatcher-27] WARN  akka.remote.artery.Association - Outbound control stream to [akka://HealthAssistantSystem@127.0.0.1:2552] failed. Restarting it. akka.remote.artery.OutboundHandshake$HandshakeTimeoutException: Handshake with [akka://HealthAssistantSystem@127.0.0.1:2552] did not complete within 20000 ms
2025-08-15 15:45:35.914 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user monitor-test: Hello, this is a test
2025-08-15 15:45:35.924 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.RouterActor - Routing query a2b99664-81df-4bd7-96a0-e0dc1352dc72 from user monitor-test to department: general-medicine (Query: 'Hello, this is a test')
2025-08-15 15:45:35.926 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.RouterActor - Successfully routed query a2b99664-81df-4bd7-96a0-e0dc1352dc72 to general-medicine department using 'tell' pattern
2025-08-15 15:45:35.928 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - GeneralMedicineActor processing query a2b99664-81df-4bd7-96a0-e0dc1352dc72 from user monitor-test on node akka://HealthAssistantSystem@127.0.0.1:2551 (ask pattern)
2025-08-15 15:45:35.931 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.GeneralMedicineActor - Sent query a2b99664-81df-4bd7-96a0-e0dc1352dc72 to LLMActor using 'ask' pattern
2025-08-15 15:45:35.931 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  com.healthassistant.actors.LLMActor - Processing query a2b99664-81df-4bd7-96a0-e0dc1352dc72 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:45:35.931 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593
2025-08-15 15:45:35.933 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=593, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful medical information assistant. Provide general health information, explain symptoms and conditions, and offer general wellness advice. Always emphasize the importance of consulting with healthcare professionals for proper medical diagnosis and treatment, especially for serious or persistent symptoms.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: Hello, this is a test","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:45:40.061 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 694
2025-08-15 15:45:40.062 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query a2b99664-81df-4bd7-96a0-e0dc1352dc72, response length: 694
2025-08-15 15:45:40.063 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.GeneralMedicineActor - Received LLM response for query a2b99664-81df-4bd7-96a0-e0dc1352dc72 (success: true)
2025-08-15 15:45:40.063 [ForkJoinPool.commonPool-worker-12] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query a2b99664-81df-4bd7-96a0-e0dc1352dc72: success=true
2025-08-15 15:45:40.069 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query a2b99664-81df-4bd7-96a0-e0dc1352dc72 from user monitor-test to general-medicine department (tell pattern)
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.GeneralMedicineActor - Sent log entry for query a2b99664-81df-4bd7-96a0-e0dc1352dc72 to LoggerActor using 'tell' pattern
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query ID: a2b99664-81df-4bd7-96a0-e0dc1352dc72
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.GeneralMedicineActor - Sent chat history entry for query a2b99664-81df-4bd7-96a0-e0dc1352dc72 to ChatHistoryActor for MongoDB storage
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - User ID: monitor-test
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.GeneralMedicineActor - Completed processing query a2b99664-81df-4bd7-96a0-e0dc1352dc72 - responded to user
2025-08-15 15:45:40.070 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Department: general-medicine
2025-08-15 15:45:40.071 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Query: Hello, this is a test
2025-08-15 15:45:40.072 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Response: Hello! I'm happy to help answer any health-related questions you may have. However, since you've men...
2025-08-15 15:45:40.072 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:45:40.072 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:45:40.064741100
2025-08-15 15:45:40.072 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:45:40.073 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:45:40.075 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.ChatHistoryActor - Saving chat history (fire-and-forget) for query: a2b99664-81df-4bd7-96a0-e0dc1352dc72 from user: monitor-test
2025-08-15 15:45:40.114 [ForkJoinPool.commonPool-worker-12] INFO  c.h.services.MongoDBService - Saved chat history entry for user: monitor-test, queryId: a2b99664-81df-4bd7-96a0-e0dc1352dc72
2025-08-15 15:45:40.114 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully saved chat history to MongoDB: a2b99664-81df-4bd7-96a0-e0dc1352dc72 for user: monitor-test
2025-08-15 15:45:40.116 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/general-medicine-actor/chat-history-actor#-2112267132] was unhandled. [4] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:47:01.424 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-pharmacy-user: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:47:01.424 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Routing query fa74c388-a988-4c50-9b5a-c05593f56d32 from user test-pharmacy-user to department: pharmacy (Query: 'What are the side effects of ibuprofen and how much should I take it?')
2025-08-15 15:47:01.425 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.RouterActor - Successfully routed query fa74c388-a988-4c50-9b5a-c05593f56d32 to pharmacy department using 'tell' pattern
2025-08-15 15:47:01.428 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.PharmacyActor - PharmacyActor processing query fa74c388-a988-4c50-9b5a-c05593f56d32 from user test-pharmacy-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (forward pattern)
2025-08-15 15:47:01.429 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  com.healthassistant.actors.LLMActor - Processing query fa74c388-a988-4c50-9b5a-c05593f56d32 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:47:01.429 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.PharmacyActor - Sent pharmacy query fa74c388-a988-4c50-9b5a-c05593f56d32 to LLMActor for processing
2025-08-15 15:47:01.429 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683
2025-08-15 15:47:01.430 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=683, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a knowledgeable pharmacy assistant. Provide accurate information about medications, dosages, side effects, drug interactions, and general pharmaceutical advice. Always emphasize the importance of consulting with pharmacists or healthcare providers for medication decisions and never recommend stopping prescribed medications without medical supervision.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: What are the side effects of ibuprofen and how much should I take it?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:47:16.954 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2032
2025-08-15 15:47:16.954 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query fa74c388-a988-4c50-9b5a-c05593f56d32, response length: 2032
2025-08-15 15:47:16.955 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.PharmacyActor - Received LLM response for pharmacy query fa74c388-a988-4c50-9b5a-c05593f56d32 (success: true)
2025-08-15 15:47:16.956 [HealthAssistantSystem-akka.actor.default-dispatcher-31] INFO  c.h.actors.ChatHistoryActor - Saving chat history (fire-and-forget) for query: fa74c388-a988-4c50-9b5a-c05593f56d32 from user: test-pharmacy-user
2025-08-15 15:47:16.956 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: LoggerActor received forward request for query fa74c388-a988-4c50-9b5a-c05593f56d32 - will log and forward to original sender
2025-08-15 15:47:16.957 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query fa74c388-a988-4c50-9b5a-c05593f56d32 from user test-pharmacy-user to pharmacy department (tell pattern)
2025-08-15 15:47:16.957 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:47:16.957 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query ID: fa74c388-a988-4c50-9b5a-c05593f56d32
2025-08-15 15:47:16.956 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.PharmacyActor - FORWARD PATTERN: Forwarded pharmacy query fa74c388-a988-4c50-9b5a-c05593f56d32 response through LoggerActor while maintaining original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 15:47:16.958 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - User ID: test-pharmacy-user
2025-08-15 15:47:16.958 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Department: pharmacy
2025-08-15 15:47:16.958 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query: What are the side effects of ibuprofen and how much should I take it?
2025-08-15 15:47:16.958 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide general information about ibuprofen. If you have specific concer...
2025-08-15 15:47:16.959 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:47:16.959 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:47:16.955929
2025-08-15 15:47:16.959 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:47:16.959 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:47:16.959 [ForkJoinPool.commonPool-worker-13] INFO  c.h.services.MongoDBService - Saved chat history entry for user: test-pharmacy-user, queryId: fa74c388-a988-4c50-9b5a-c05593f56d32
2025-08-15 15:47:16.960 [ForkJoinPool.commonPool-worker-13] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query fa74c388-a988-4c50-9b5a-c05593f56d32: success=true
2025-08-15 15:47:16.960 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully saved chat history to MongoDB: fa74c388-a988-4c50-9b5a-c05593f56d32 for user: test-pharmacy-user
2025-08-15 15:47:16.961 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - FORWARD PATTERN: Successfully logged and forwarded response for query fa74c388-a988-4c50-9b5a-c05593f56d32 to original sender Actor[akka://HealthAssistantSystem/temp/singletonProxyhealth-assistant-router-no-dc$a#0]
2025-08-15 15:47:16.961 [HealthAssistantSystem-akka.actor.default-dispatcher-27] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/pharmacy-actor/pharmacy-chat-history-actor#-951458873] was unhandled. [5] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
2025-08-15 15:52:20.010 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.http.HealthAssistantHttpServer - Received HTTP query from user test-pharmacy-user: I have broken my elbow, should I go for a scan?
2025-08-15 15:52:20.011 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.RouterActor - Routing query acdc9498-89b6-4cc3-9f41-68ed389fe392 from user test-pharmacy-user to department: radiology (Query: 'I have broken my elbow, should I go for a scan?')
2025-08-15 15:52:20.012 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.healthassistant.actors.RouterActor - Successfully routed query acdc9498-89b6-4cc3-9f41-68ed389fe392 to radiology department using 'tell' pattern
2025-08-15 15:52:20.015 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - RadiologyActor processing query acdc9498-89b6-4cc3-9f41-68ed389fe392 from user test-pharmacy-user on node akka://HealthAssistantSystem@127.0.0.1:2551 (multiple patterns)
2025-08-15 15:52:20.018 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Sent radiology query acdc9498-89b6-4cc3-9f41-68ed389fe392 to LLMActor using 'ask' pattern
2025-08-15 15:52:20.018 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  com.healthassistant.actors.LLMActor - Processing query acdc9498-89b6-4cc3-9f41-68ed389fe392 on node akka://HealthAssistantSystem@127.0.0.1:2551 using LLaMA model (ask pattern)
2025-08-15 15:52:20.018 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=681
2025-08-15 15:52:20.019 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Sending request to Ollama: model=llama3.2, prompt length=681, request body: {"model":"llama3.2","prompt":"You are a helpful medical assistant. Context: You are a helpful radiology information assistant. Provide information about medical imaging procedures, what they detect, preparation requirements, and general information about X-rays, CT scans, MRIs, ultrasounds, and other imaging techniques. Always emphasize that only qualified radiologists and healthcare providers can interpret imaging results and provide medical diagnoses.\n\nPlease provide a helpful, accurate, and professional response to the following medical query. Important: Always recommend consulting with healthcare professionals for serious medical concerns.\n\nQuery: I have broken my elbow, should I go for a scan?","stream":false,"options":{"temperature":0.7,"top_p":0.9,"num_predict":500}}
2025-08-15 15:52:36.908 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.OllamaService - Successfully received response from Ollama, length: 2186
2025-08-15 15:52:36.909 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  com.healthassistant.actors.LLMActor - LLM processing successful for query acdc9498-89b6-4cc3-9f41-68ed389fe392, response length: 2186
2025-08-15 15:52:36.909 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Received LLM response for radiology query acdc9498-89b6-4cc3-9f41-68ed389fe392 (success: true)
2025-08-15 15:52:36.910 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Sent response to user using 'tell' pattern for query acdc9498-89b6-4cc3-9f41-68ed389fe392
2025-08-15 15:52:36.910 [ForkJoinPool.commonPool-worker-14] INFO  c.h.http.HealthAssistantHttpServer - Returning HTTP response for query acdc9498-89b6-4cc3-9f41-68ed389fe392: success=true
2025-08-15 15:52:36.910 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - Sent log entry for query acdc9498-89b6-4cc3-9f41-68ed389fe392 to LoggerActor using 'tell' pattern
2025-08-15 15:52:36.910 [HealthAssistantSystem-akka.actor.default-dispatcher-32] INFO  c.h.actors.ChatHistoryActor - Saving chat history (fire-and-forget) for query: acdc9498-89b6-4cc3-9f41-68ed389fe392 from user: test-pharmacy-user
2025-08-15 15:52:36.910 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Logging entry for query acdc9498-89b6-4cc3-9f41-68ed389fe392 from user test-pharmacy-user to radiology department (tell pattern)
2025-08-15 15:52:36.910 [HealthAssistantSystem-akka.actor.default-dispatcher-28] INFO  c.h.actors.RadiologyActor - RadiologyActor completed processing query acdc9498-89b6-4cc3-9f41-68ed389fe392 using multiple communication patterns
2025-08-15 15:52:36.911 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - === QUERY LOG ===
2025-08-15 15:52:36.911 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query ID: acdc9498-89b6-4cc3-9f41-68ed389fe392
2025-08-15 15:52:36.911 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - User ID: test-pharmacy-user
2025-08-15 15:52:36.912 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Department: radiology
2025-08-15 15:52:36.912 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Query: I have broken my elbow, should I go for a scan?
2025-08-15 15:52:36.912 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Response: I'm not a doctor, but I can provide general information about imaging procedures related to elbow in...
2025-08-15 15:52:36.912 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Success: true
2025-08-15 15:52:36.912 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Timestamp: 2025-08-15T15:52:36.910567200
2025-08-15 15:52:36.913 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - Node: akka://HealthAssistantSystem@127.0.0.1:2551
2025-08-15 15:52:36.913 [ForkJoinPool.commonPool-worker-14] INFO  c.h.services.MongoDBService - Saved chat history entry for user: test-pharmacy-user, queryId: acdc9498-89b6-4cc3-9f41-68ed389fe392
2025-08-15 15:52:36.913 [HealthAssistantSystem-akka.actor.default-dispatcher-29] INFO  c.healthassistant.actors.LoggerActor - =================
2025-08-15 15:52:36.913 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  c.h.actors.ChatHistoryActor - ✅ Successfully saved chat history to MongoDB: acdc9498-89b6-4cc3-9f41-68ed389fe392 for user: test-pharmacy-user
2025-08-15 15:52:36.913 [HealthAssistantSystem-akka.actor.default-dispatcher-30] INFO  akka.actor.LocalActorRef - Message [com.healthassistant.messages.ChatHistoryMessages$SaveChatHistoryResponse] to Actor[akka://HealthAssistantSystem/system/singletonManagerhealth-assistant-router/health-assistant-router/radiology-actor/radiology-chat-history-actor#1470811817] was unhandled. [6] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
